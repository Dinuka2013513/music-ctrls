var htmlTempl=htmlTempl||{};htmlTempl.templates={"src/controllers/knob/knob.html":'<svg\r\n        aria-hidden="true"\r\n        viewBox="0 0 300 300"\r\n        width="100%"\r\n        height="100%"\r\n        class="sisiliano-knob">\r\n    <defs\r\n            id="defs4">\r\n        <filter\r\n                style="color-interpolation-filters:sRGB;"\r\n                id="filter6244">\r\n            <feFlood\r\n                    flood-opacity="0.4"\r\n                    flood-color="black"\r\n                    result="flood"\r\n                    id="feFlood6246" />\r\n            <feComposite\r\n                    in="flood"\r\n                    in2="SourceGraphic"\r\n                    operator="in"\r\n                    result="composite1"\r\n                    id="feComposite6248" />\r\n            <feGaussianBlur\r\n                    in="composite1"\r\n                    stdDeviation="3"\r\n                    result="blur"\r\n                    id="feGaussianBlur6250" />\r\n            <feOffset\r\n                    dx="-1"\r\n                    dy="1"\r\n                    result="offset"\r\n                    id="feOffset6252" />\r\n            <feComposite\r\n                    in="SourceGraphic"\r\n                    in2="offset"\r\n                    operator="over"\r\n                    result="composite2"\r\n                    id="feComposite6254" />\r\n        </filter>\r\n        <filter\r\n                style="color-interpolation-filters:sRGB;"\r\n                id="filter6245">\r\n            <feFlood\r\n                    flood-opacity="0.5"\r\n                    flood-color="black"\r\n                    result="flood"\r\n                    id="feFlood6246" />\r\n            <feComposite\r\n                    in="flood"\r\n                    in2="SourceGraphic"\r\n                    operator="in"\r\n                    result="composite1"\r\n                    id="feComposite6248" />\r\n            <feGaussianBlur\r\n                    in="composite1"\r\n                    stdDeviation="3.5"\r\n                    result="blur"\r\n                    id="feGaussianBlur6250" />\r\n            <feOffset\r\n                    dx="2"\r\n                    dy="-2"\r\n                    result="offset"\r\n                    id="feOffset6252" />\r\n            <feComposite\r\n                    in="SourceGraphic"\r\n                    in2="offset"\r\n                    operator="over"\r\n                    result="composite2"\r\n                    id="feComposite6254" />\r\n        </filter>\r\n    </defs>\r\n\r\n    <style>\r\n        .sisiliano-knob-circle {\r\n            filter: url("#filter6244");\r\n        }\r\n        .sisiliano-border, .sisiliano:focus .sisiliano-knob-circle {\r\n            filter: url("#filter6245");\r\n        }\r\n        .sisiliano-border, .sisiliano:focus .sisiliano-border {\r\n            filter: none;\r\n        }\r\n    </style>\r\n\r\n    <g style="display:inline">\r\n        <circle\r\n                class="sisiliano-border"\r\n                r="147" cx="150"\r\n                cy="150">\r\n        </circle>\r\n        <circle\r\n                class="sisiliano-knob-circle sisiliano-knob-background-circle"\r\n                id="circle5634"\r\n                r="130"\r\n                cx="150"\r\n                cy="150"/>\r\n        <text xmlns="http://www.w3.org/2000/svg" x="40" y="170"\r\n              class="unselectable sisiliano-knob-value-text">\r\n            100\r\n        </text>\r\n        <circle\r\n                class="sisiliano-knob-circle sisiliano-knob-value-circle"\r\n                fill="transparent"\r\n                id="circle5636"\r\n                r="130"\r\n                cx="150"\r\n                cy="150"\r\n                transform="rotate(90, 150, 150)"\r\n                stroke-width="20"/>\r\n    </g>\r\n</svg>',"src/controllers/linear-slider/linear-slider.html":'<svg\r\n        aria-hidden="true"\r\n        viewBox="0 0 {{viewBox.width}} {{viewBox.height}}"\r\n        width="100%"\r\n        height="100%"\r\n        class="sisiliano-linear-slider">\r\n    <defs\r\n            id="defs4">\r\n        <filter\r\n                style="color-interpolation-filters:sRGB;"\r\n                id="filter6244">\r\n            <feFlood\r\n                    flood-opacity="0.4"\r\n                    flood-color="black"\r\n                    result="flood"\r\n                    id="feFlood6246" />\r\n            <feComposite\r\n                    in="flood"\r\n                    in2="SourceGraphic"\r\n                    operator="in"\r\n                    result="composite1"\r\n                    id="feComposite6248" />\r\n            <feGaussianBlur\r\n                    in="composite1"\r\n                    stdDeviation="3"\r\n                    result="blur"\r\n                    id="feGaussianBlur6250" />\r\n            <feOffset\r\n                    dx="-1"\r\n                    dy="1"\r\n                    result="offset"\r\n                    id="feOffset6252" />\r\n            <feComposite\r\n                    in="SourceGraphic"\r\n                    in2="offset"\r\n                    operator="over"\r\n                    result="composite2"\r\n                    id="feComposite6254" />\r\n        </filter>\r\n        <filter\r\n                style="color-interpolation-filters:sRGB;"\r\n                id="filter6245">\r\n            <feFlood\r\n                    flood-opacity="0.5"\r\n                    flood-color="black"\r\n                    result="flood"\r\n                    id="feFlood6246" />\r\n            <feComposite\r\n                    in="flood"\r\n                    in2="SourceGraphic"\r\n                    operator="in"\r\n                    result="composite1"\r\n                    id="feComposite6248" />\r\n            <feGaussianBlur\r\n                    in="composite1"\r\n                    stdDeviation="3.5"\r\n                    result="blur"\r\n                    id="feGaussianBlur6250" />\r\n            <feOffset\r\n                    dx="-1"\r\n                    dy="1"\r\n                    result="offset"\r\n                    id="feOffset6252" />\r\n            <feComposite\r\n                    in="SourceGraphic"\r\n                    in2="offset"\r\n                    operator="over"\r\n                    result="composite2"\r\n                    id="feComposite6254" />\r\n        </filter>\r\n        <filter id="dropshadow" height="130%">\r\n            <feFlood\r\n                    flood-opacity="0.5"\r\n                    flood-color="red"\r\n                    result="flood"/>\r\n            <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>\r\n            <feOffset dx="1" dy="1" result="offsetblur"/>\r\n            <feMerge>\r\n                <feMergeNode/>\r\n                <feMergeNode in="SourceGraphic"/>\r\n            </feMerge>\r\n        </filter>\r\n        <filter style="color-interpolation-filters:sRGB;" id="drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="black" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="1" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="1" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n        <filter style="color-interpolation-filters:sRGB;" id="hover-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="black" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="1" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="2" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n    </defs>\r\n\r\n    <style>\r\n        .sisiliano-linear-slider .sisiliano-linear-slider-background-rect,\r\n        .sisiliano-linear-slider .sisiliano-linear-slider-value-rect,\r\n        .sisiliano-linear-slider .sisiliano-linear-slider-value-pointer,\r\n        .sisiliano-linear-slider .sisiliano-linear-slider-value-pointer-hover,\r\n        .sisiliano-linear-slider .sisiliano-linear-slider-value-label {\r\n            filter: url("#drop-shadow");\r\n        }\r\n\r\n        .sisiliano:focus .sisiliano-linear-slider .sisiliano-linear-slider-background-rect,\r\n        .sisiliano:focus .sisiliano-linear-slider .sisiliano-linear-slider-value-rect {\r\n            filter: url("#hover-drop-shadow");\r\n        }\r\n    </style>\r\n\r\n    <g class="sisiliano-linear-slider-ruler"></g>\r\n    <rect\r\n            class="sisiliano-linear-slider-rect sisiliano-linear-slider-background-rect"\r\n            height="8"\r\n            width="420"\r\n            x="40"\r\n            y="37"/>\r\n    <rect\r\n            class="sisiliano-linear-slider-rect sisiliano-linear-slider-value-rect"\r\n            height="10"\r\n            width="200"\r\n            x="40"\r\n            y="36"/>\r\n    <rect\r\n            class="sisiliano-linear-slider-value-pointer sisiliano-linear-slider-value-pointer-hover"\r\n            width="30"\r\n            height="30"\r\n            rx="50%"\r\n            ry="50%"\r\n            x="90"\r\n            y="26">\r\n    </rect>\r\n    <rect\r\n            class="sisiliano-linear-slider-value-pointer sisiliano-linear-slider-value-pointer"\r\n            width="20"\r\n            height="20"\r\n            rx="50%"\r\n            ry="50%"\r\n            x="90"\r\n            y="31">\r\n    </rect>\r\n    <rect\r\n            class="sisiliano-linear-slider-value-label"\r\n            x="10"\r\n            y="0"\r\n            fill="{{color}}"\r\n            width="50"\r\n            height="20"\r\n            rx="5"\r\n            ry="5">\r\n    </rect>\r\n    <text text-anchor="start"\r\n          x="10"\r\n          y="15"\r\n          class="unselectable sisiliano-linear-slider-value-text">\r\n        100\r\n    </text>\r\n</svg>',"src/controllers/piano/piano.html":'<div tabindex="0" class="sisiliano" aria-label="{{title}} ,{{description}}" id="{{id}}">\r\n    <svg\r\n            class="sisiliano-piano"\r\n            width="100%"\r\n            height="100%"\r\n            viewBox="0 0 {{viewBox.width}} {{viewBox.height}}">\r\n        <defs\r\n                id="defs4">\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6244">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="0"\r\n                        dy="1"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="8"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="-3"\r\n                        dy="3.5"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3.5"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="2"\r\n                        dy="-2"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n        </defs>\r\n\r\n        <style>\r\n            /* These styles have been added seperately as a fix for firefox and IE */\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-white-key {\r\n                filter: url(\'#filter6244\');\r\n            }\r\n\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-black-key {\r\n                filter: url(\'#filter6244\');\r\n            }\r\n\r\n            #{{id}}.sisiliano-border {\r\n                filter: url("#filter6245");\r\n            }\r\n\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-key-pressed,\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-white-key:hover,\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-black-key:hover,\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-key-inactive:hover {\r\n                fill: {{color.[0]}};\r\n                stroke: {{color.[0]}};\r\n            }\r\n        </style>\r\n        <g style="display:inline" class="sisiliano-piano-key-board">\r\n        </g>\r\n    </svg>\r\n</div>\r\n'},function(a){"use strict";a.registerNamespace("sisiliano"),sisiliano.templates=htmlTempl.templates,a.registerNamespace("sisiliano.util"),sisiliano.util.templateCache={},sisiliano.util.getTemplate=function(a,b){var c=sisiliano.util.templateCache[b];if(c)a(c);else{var d=htmlTempl.templates[b];c=Handlebars.compile(d),sisiliano.util.templateCache[b]=c,a(c)}},sisiliano.util.addClass=function(a,b){sisiliano.util.removeClass(a,b);var c=$(a).attr("class"),d=c+" "+b;$(a).attr("class",d)},sisiliano.util.removeClass=function(a,b){var c=$(a).attr("class"),d=c.replace(new RegExp(" "+b,"g"),"").replace(new RegExp(b,"g"),"");$(a).attr("class",d)},sisiliano.util.getAngle=function(a,b){var c=Math.atan(Math.abs((b.x-a.x)/(b.y-a.y)))/(2*Math.PI);return a.x>b.x?a.y>b.y&&(c=.5-c):(a.y<b.y&&(c=.5-c),c+=.5),c},sisiliano.util.isInsideTheCircle=function(a,b,c){var d=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));return b>=d},sisiliano.util.applyStyles=function(b,c){var d="";a.each(c,function(a,b){d+=b+":"+a+";"}),b.attr("style",d)}}(fluid),function(a){"use strict";a.defaults("sisiliano.util.ariaDescription",{gradeNames:"fluid.component",ariaDescription:"",listeners:{onCreate:{func:"sisiliano.util.ariaDescription.onCreate",args:["{that}"]}}}),sisiliano.util.ariaDescription.onCreate=function(a){var b=$("#sisiliano-component-guide-descriptions");0===b.length&&(b=$("<div id='sisiliano-component-guide-descriptions' style='visibility: hidden'></div>"),$("body").append(b));var c=(a.typeName.replace(/\./g,"-")+"-guide-description").toLowerCase(),d=$("#"+c);0===d.length&&(d=$("<div id='"+c+"'>"+a.options.ariaDescription+"</div>"),b.append(d)),a.container.attr("aria-describedby",c)}}(fluid),function(a){"use strict";a.defaults("sisiliano.util.colorable",{gradeNames:"fluid.component",model:{color:["#009688","#FFFFFF"]},events:{onColorChange:null},modelListeners:{color:{func:"sisiliano.util.colorable.onColorChange",args:["{that}","{that}.model.color"]}},listeners:{onCreate:{func:"sisiliano.util.colorable.onColorChange",args:["{that}","{that}.model.color"]}}}),sisiliano.util.colorable.defaultColor=["#009688","#FFFFFF"],sisiliano.util.colorable.onColorChange=function(a,b){b?"object"==typeof b&&b.length?1===b.length?(b.push(sisiliano.util.colorable.defaultColor[1]),a.applier.change("color",b)):a.events.onColorChange.fire():(b=[b],a.applier.change("color",b)):a.applier.change("color",[sisiliano.util.colorable.defaultColor[0],sisiliano.util.colorable.defaultColor[1]])}}(fluid),function(a){"use strict";a.defaults("sisiliano.component",{gradeNames:["sisiliano.util.colorable","sisiliano.util.ariaDescription","fluid.viewComponent"],model:{template:""},events:{onReady:null},listeners:{onCreate:{func:"sisiliano.component.onTemplateChange",args:["{that}","{that}.options.template"]},onReady:[{func:"{that}.events.onColorChange.fire",args:["{that}","{that}.model.color"]}]}}),sisiliano.component.onTemplateChange=function(a,b){b?(a.applier.change("id","fluid-sisiliano-id-"+a.id),sisiliano.util.getTemplate(function(b){var c=b(a.model);a.container.html(c),a.events.onReady.fire()},b)):a.events.onReady.fire()}}(fluid),function(a){"use strict";a.defaults("sisiliano.knob",{gradeNames:["sisiliano.slider"],template:"src/controllers/knob/knob.html",model:{radius:130},ariaDescription:"Use up and down keys to increase and decrease the value. If you are using the mouse, Drag around the center to adjust the value",selectors:{controller:".sisiliano",svg:"svg",valueLabel:".sisiliano-knob-value-text",valueCircle:".sisiliano-knob-value-circle",knobBackgroundCircle:".sisiliano-knob-background-circle",borderCircle:"sisiliano-knob-circle sisiliano-knob-border-circle",circles:".sisiliano-knob-circle"},listeners:{onReady:[{func:"sisiliano.knob.onRadiusChange",args:["{that}","{that}.model.radius"]},{func:"sisiliano.knob.addListeners",args:["{that}"]}],onValueChange:{func:"sisiliano.knob.onValueChange",args:["{arguments}.0","{arguments}.1","{arguments}.2","{arguments}.3"]},onColorChange:{func:"sisiliano.knob.onColorChange",args:["{that}","{that}.model.color"]},onStatusChange:{func:"sisiliano.knob.onStatusChange",args:["{that}","{that}.model.status.isActive"]}},modelListeners:{radius:{func:"sisiliano.knob.onRadiusChange",args:["{that}","{that}.model.radius"]}}}),sisiliano.knob.onRadiusChange=function(a,b){a.locate("knobBackgroundCircle").attr("r",b);var c=2*b*Math.PI;a.applier.change("circumference",c),a.locate("circles").attr("stroke-dasharray",c)},sisiliano.knob.onStatusChange=function(a,b){var c="sisiliano-knob"+(b?" sisiliano-active":"");d3.select(a.container.get(0)).select(".sisiliano-knob").attr("class",c)},sisiliano.knob.onValueChange=function(a,b){var c=a.model.size,d=a.model.circumference/c*(c-b)+"px";a.locate("valueCircle").attr("stroke-dashoffset",d)},sisiliano.knob.onColorChange=function(a,b){a.locate("valueCircle").css("stroke",b[0]),a.locate("knobBackgroundCircle").css("stroke",b[0]),a.locate("valueCircle").css("fill",b[0]),a.locate("knobBackgroundCircle").css("fill",b[0]),a.locate("valueLabel").css("fill",b[0])},sisiliano.knob.addListeners=function(a){var b=function(){var b=d3.mouse(a.container.find("svg").eq(0).get(0)),c={x:150,y:150},d={x:b[0],y:b[1]};a.model.status.isActive&&(sisiliano.knob.setValueByAngle(a,c,d),d3.event.preventDefault())};document.addEventListener("mousemove",function(b){var c=a.locate("svg");if(c&&c.length>0){var d=c.position(),e={x:d.left+c.width()/2,y:d.top+c.height()/2},f={x:b.pageX,y:b.pageY};a.model.status.isActive&&(sisiliano.knob.setValueByAngle(a,e,f),b.preventDefault(b))}}),document.addEventListener("mouseup",sisiliano.knob.setKnobActiveStatus.bind(this,a,!1)),d3.select(a.container.get(0)).on("touchmove",b).on("mousemove",b)},sisiliano.knob.setKnobActiveStatus=function(a,b){a.applier.change("status.isActive",b)},sisiliano.knob.setValueByAngle=function(a,b,c){var d=sisiliano.util.getAngle(b,c)*a.model.size;a.model.value!==d&&a.applier.change("value",d+a.model.min)}}(fluid),function(a){"use strict";a.defaults("sisiliano.linearSlider",{gradeNames:["sisiliano.slider"],defaultViewBox:[0,0,500,50],ariaDescription:"Linear slider, the value can be adjusted by arrow keys. If you are using the mouse, drag along the slider",template:"src/controllers/linear-slider/linear-slider.html",model:{styles:{pointer:{label:{"font-size":"10px"}},ruler:{line:{width:1,height:20},value:{"font-size":"10px"}}},rulerPoints:[0,20,30,40,50,60,70,80,90,100],viewBox:{width:500,height:100},orientation:"vertical",title:"linearSlider Controller",description:""},selectors:{controller:".sisiliano",svg:"svg",valueLabel:".sisiliano-linear-slider-value-text",valueLabelRect:".sisiliano-linear-slider-value-label",valueRect:".sisiliano-linear-slider-value-rect",backgroundRect:".sisiliano-linear-slider-background-rect",rects:".sisiliano-linear-slider-rect",valueCircle:".sisiliano-linear-slider-value-circle",valueCircleHover:".sisiliano-linear-slider-value-circle-hover",ruler:".sisiliano-linear-slider-ruler",valuePointer:".sisiliano-linear-slider-value-pointer",valuePointerHover:".sisiliano-linear-slider-value-pointer-hover"},listeners:{onValueChange:{func:"sisiliano.linearSlider.onValueChange",args:["{arguments}.0","{arguments}.1"]},onColorChange:{func:"sisiliano.linearSlider.onColorChange",args:["{that}","{that}.model.color"]},onStatusChange:{func:"sisiliano.linearSlider.onStatusChange",args:["{that}","{that}.model.status.isActive"]},onReady:[{func:"sisiliano.linearSlider.drawNotches",args:["{that}"]},{func:"sisiliano.linearSlider.addListeners",args:["{that}"]}]},modelListeners:{}}),sisiliano.linearSlider.onStatusChange=function(a,b){a.locate("valuePointerHover").css("display",b?"block":"none")},sisiliano.linearSlider.onValueChange=function(a,b){var c=a.model.size,d=parseInt(a.locate("backgroundRect").attr("width"),null),e=parseInt(a.locate("backgroundRect").attr("x"),null),f=d*(b/c);a.locate("valueRect").attr("width",f),a.locate("valueLabelRect").attr("x",f+e-25),a.locate("valuePointer").attr("x",f+e-8),a.locate("valuePointerHover").attr("x",f+e-13),a.locate("valueLabel").attr("x",f+3+e-25)},sisiliano.linearSlider.onColorChange=function(a,b){a.locate("rects").attr("fill",b[0]),a.locate("valueLabelRect").attr("fill",b[0]),a.locate("valueLabel").attr("fill",b[1]),a.locate("valuePointer").attr("fill",b[0]),a.locate("valuePointerHover").attr("fill",b[0])},sisiliano.linearSlider.setValueByPosition=function(a,b){var c=parseInt(a.locate("backgroundRect").attr("width"),null),d=parseInt(a.locate("valueRect").attr("x"),null),e=(b.x-d)/c*a.model.size;a.model.value!==e&&a.applier.change("value",e+a.model.min)},sisiliano.linearSlider.addListeners=function(a){var b=function(){var b=d3.mouse(a.container.find("svg").eq(0).get(0)),c={x:b[0],y:b[1]};a.model.status.isActive&&(sisiliano.linearSlider.setValueByPosition(a,c),d3.event.preventDefault())};document.addEventListener("mousemove",function(b){var c=a.locate("svg");if(c&&c.length>0){var d=c.position(),e=c.width(),f={x:(b.pageX-d.left)/e*a.model.viewBox.width,y:0};a.model.status.isActive&&(sisiliano.linearSlider.setValueByPosition(a,f),b.preventDefault(b))}}),document.addEventListener("mouseup",function(){a.applier.change("status.isActive",!1)}),d3.select(a.container.get(0)).on("touchmove",b).on("mousemove",b)},sisiliano.linearSlider.getNotches=function(a){return a.model.rulerPoints},sisiliano.linearSlider.drawNotches=function(b){var c=sisiliano.linearSlider.getNotches(b),d=d3.select(b.locate("ruler").get(0)),e=parseInt(b.locate("backgroundRect").attr("width"),null),f=parseInt(b.locate("backgroundRect").attr("x"),null),g=parseInt(b.locate("backgroundRect").attr("y"),null);a.each(c,function(a){var c=f+e*(a-b.model.min)/(b.model.max-b.model.min),h=d.append("rect").attr("class","sisiliano-linear-slider-ruler-line").attr("fill",b.model.color[0]).attr("fill-opacity",.3).attr("x",c-.5).attr("y",g);sisiliano.util.applyStyles(h,b.model.styles.ruler.line);var i=d.append("text").attr("fill",b.model.color[0]).attr("fill-opacity",.6).attr("class","sisiliano-linear-slider-ruler-value").attr("text-anchor","end").attr("x",c+.5).attr("y",g+25).attr("transform","rotate(-90, "+(c+1)+", "+(g+25)+")").text(a);sisiliano.util.applyStyles(i,b.model.styles.ruler.value)})}}(fluid),function(a){"use strict";a.defaults("sisiliano.piano",{gradeNames:["sisiliano.component"],template:"src/controllers/piano/piano.html",model:{title:"Piano Controller",description:"The keys are accessible by mouse and the keyboad as well. Only the active area of the piano is accessible by the keyboard. If you want to move the active area, use left and right keys.",color:"#4CAF50",keyBoard:{keys:[],length:36,start:0,whiteKey:{width:40,height:150},blackKey:{width:27,height:100},padding:{top:20,bottom:20,left:20,right:20},border:{x:0,y:0,width:600,height:170},borderPadding:{top:10,bottom:10,left:10,right:10}},viewBox:{width:600,height:170},activeArea:{start:0,end:10}},events:{onKeyPress:null,onKeyRelease:null},selectors:{root:".sisiliano",svg:".sisiliano-piano",keyBoard:".sisiliano-piano-key-board",whiteKeys:".sisiliano-piano-white-key",blackKeys:".sisiliano-piano-black-key",keys:".sisiliano-piano-key",activeAreaStatus:".sisiliano-piano-active-area-status"},listeners:{onReady:[{func:"sisiliano.piano.generateKeyboard",args:["{that}"]},{func:"sisiliano.piano.onCreate",args:["{that}","{that}.dom.keyBoard"]}]},modelListeners:{"viewBox.width":{func:"sisiliano.piano.onViewBoxChange",args:["{that}","{that}.model.viewBox"]},"viewBox.height":{func:"sisiliano.piano.onViewBoxChange",args:["{that}","{that}.model.viewBox"]},"activeArea.end":{func:"sisiliano.piano.onChangeActiveArea",args:["{that}","{that}.model.keyBoard.keys","{that}.model.activeArea"]},"keyBoard.keys":{func:"sisiliano.piano.onKeysChange",args:["{that}","{that}.model.keyBoard.keys"]}}}),sisiliano.piano.onViewBoxChange=function(a,b){d3.select(a.locate("svg").get(0)).attr("viewBox","0 0 "+b.width+" "+b.height)},sisiliano.piano.onChangeActiveArea=function(a,b,c){var d=[81,65,87,83,69,68,82,70,84,71,89,72,85,74,73,75,79,76,80,186,219,222,221],e=sisiliano.piano.getWhiteKeys(b);if(e.length>0){var f=e[c.start],g=e[Math.min(c.end,a.model.keyBoard.length-1)],h=f.index,i=g.index,j="The piano is active from "+sisiliano.piano.getMusicNote(f)+" to "+sisiliano.piano.getMusicNote(g);if(a.locate("activeAreaStatus").text(j),h>0){var k=b[h-1];"BLACK"===k.color&&h--}if(i<b.length-1){var l=b[i+1];"BLACK"===l.color&&i++}for(var m=0,n=0;n<b.length;n++){var o=b[n];o.isActive=n>=h&&i>=n,o.isActive&&0===m&&"WHITE"===o.color&&m++,m>1&&"WHITE"===o.color&&"WHITE"===b[n-1].color&&m++,o.isActive?(o.keyCode=d[m],m++):o.keyCode=null}}sisiliano.piano.onKeysChange(a,b),sisiliano.piano.clearPressedNodes(a)},sisiliano.piano.onKeysChange=function(a,b){d3.select(a.container.get(0)).selectAll(".sisiliano-piano-key").each(function(){var c=sisiliano.piano.getElementKey(d3.select(this),b);sisiliano.piano.updateKey(a,c,d3.select(this))})},sisiliano.piano.getElementKey=function(a,b){return b[a.attr("index")]},sisiliano.piano.onCreate=function(b){var c=d3.select(b.locate("keyBoard").get(0));c.empty(),c.append("text").attr("x",b.model.keyBoard.border.x).attr("y",b.model.keyBoard.border.y).attr("aria-live","assertive").attr("class","sisiliano-piano-active-area-status").text("Piano is active from G to C"),a.each(sisiliano.piano.getWhiteKeys(b.model.keyBoard.keys),function(a){c.append("rect").attr("index",a.index).attr("class","sisiliano-piano-key sisiliano-piano-white-key").attr("height",a.height).attr("width",a.width).attr("x",a.x).attr("y",a.y)}),a.each(sisiliano.piano.getBlackKeys(b.model.keyBoard.keys),function(a){c.append("rect").attr("index",a.index).attr("class","sisiliano-piano-key sisiliano-piano-black-key").attr("height",a.height).attr("width",a.width).attr("x",a.x).attr("y",a.y)}),sisiliano.piano.onChangeActiveArea(b,b.model.keyBoard.keys,b.model.activeArea),sisiliano.piano.appendListeners(b),sisiliano.piano.onViewBoxChange(b,b.model.viewBox)},sisiliano.piano.moveTabBy=function(a,b){if(b){var c={start:a.model.activeArea.start+b,end:a.model.activeArea.end+b},d=sisiliano.piano.getWhiteKeys(a.model.keyBoard.keys),e=c.start>=0&&c.start<d.length&&c.end>=0&&c.end<d.length&&c.start<c.end;e&&a.applier.change("activeArea",c)}},sisiliano.piano.clearPressedNodes=function(a){for(var b=0;b<a.model.keyBoard.keys.length;b++){var c=a.model.keyBoard.keys[b];c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c)}},sisiliano.piano.appendListeners=function(a){var b=!1;d3.select(document).on("mouseup",function(){b=!1});var c=function(){b=!0;var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];b&&!d.isPressed&&(d.isPressed=!0,sisiliano.piano.updateKey(a,d),sisiliano.piano.playKey(a,d))},d=function(){var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];b&&!d.isPressed&&(d.isPressed=!0,sisiliano.piano.updateKey(a,d),sisiliano.piano.playKey(a,d)),d3.event.preventDefault()},e=function(){b=!1;var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];d.isPressed=!1,sisiliano.piano.updateKey(a,d),sisiliano.piano.releaseKey(a,d)},f=function(){var b=d3.select(this).attr("index"),c=a.model.keyBoard.keys[b];c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c),d3.event.preventDefault()};d3.select(a.container.get(0)).selectAll(".sisiliano-piano-key").on("mousedown",c).on("touchstart",c).on("mouseover",d).on("touchmove",d).on("mouseup",e).on("touchend",e).on("touchcancel",f).on("mouseleave",f),d3.select(a.container.get(0)).on("keydown",function(){var b=d3.event.keyCode,c=sisiliano.piano.getKeyByComputerKeyCode(b,a.model.keyBoard.keys);switch(c&&!c.isPressed&&(c.isPressed=!0,sisiliano.piano.updateKey(a,c),sisiliano.piano.playKey(a,c)),b){case 37:sisiliano.piano.moveTabBy(a,-1),d3.event.preventDefault();break;case 39:sisiliano.piano.moveTabBy(a,1),d3.event.preventDefault()}}),d3.select(a.container.get(0)).on("keyup",function(){var b=d3.event.keyCode,c=sisiliano.piano.getKeyByComputerKeyCode(b,a.model.keyBoard.keys);c&&(c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c),d3.event.preventDefault())})},sisiliano.piano.playKey=function(a,b){a.events.onKeyPress.fire(b.index,sisiliano.piano.getFreequency(b.octave,b.octaveIndex))},sisiliano.piano.releaseKey=function(a,b){a.events.onKeyRelease.fire(b.index)},sisiliano.piano.updateKey=function(a,b,c){
c||(c=a.container.find(".sisiliano-piano-key[index='"+b.index+"']"));var d=b.className;d+=b.isActive?" sisiliano-piano-key-active":" sisiliano-piano-key-inactive",d+=b.isPressed?" sisiliano-piano-key-pressed":"",c.attr("class",d)},sisiliano.piano.getKeyByComputerKeyCode=function(a,b){var c=b.filter(function(b){return b.keyCode===a});return 0===c.length?null:c[0]},sisiliano.piano.getKeysByColor=function(a,b){return a.filter(function(a){return a.color===b})},sisiliano.piano.getFreequency=function(a,b){var c=[261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883];return Math.pow(2,a)*c[b]},sisiliano.piano.OCTAVE={0:{color:"WHITE",note:"c"},1:{color:"BLACK",note:"c#"},2:{color:"WHITE",note:"d"},3:{color:"BLACK",note:"d#"},4:{color:"WHITE",note:"e"},5:{color:"WHITE",note:"f"},6:{color:"BLACK",note:"f#"},7:{color:"WHITE",note:"g"},8:{color:"BLACK",note:"g#"},9:{color:"WHITE",note:"a"},10:{color:"BLACK",note:"a#"},11:{color:"WHITE",note:"b"}},sisiliano.piano.getPianoKey=function(a){return sisiliano.piano.OCTAVE[a.octaveIndex]},sisiliano.piano.getMusicNote=function(a){var b=sisiliano.piano.getPianoKey(a);return b.note+" in octave "+(a.octave+1)},sisiliano.piano.getWhiteKeys=function(a){return sisiliano.piano.getKeysByColor(a,"WHITE")},sisiliano.piano.getBlackKeys=function(a){return sisiliano.piano.getKeysByColor(a,"BLACK")},sisiliano.piano.generateKeyboard=function(a){a.model.keyBoard.blackKey.width=(a.model.keyBoard.whiteKey.width-1)/3*2+1,a.model.keyBoard.blackKey.height=a.model.keyBoard.whiteKey.height/3*2,a.model.keyBoard.keys=[];for(var b={whiteKeys:0,blackKeys:0},c=0,d=a.model.keyBoard.start;d<a.model.keyBoard.length+a.model.keyBoard.start;d++,c++){var e,f=d%12;"WHITE"===sisiliano.piano.OCTAVE[f].color?(e={color:"WHITE",x:a.model.keyBoard.padding.left+b.whiteKeys*a.model.keyBoard.whiteKey.width,y:a.model.keyBoard.padding.top,width:a.model.keyBoard.whiteKey.width-1,height:a.model.keyBoard.whiteKey.height,index:c,octave:Math.floor(d/12),octaveIndex:f,className:"sisiliano-piano-key sisiliano-piano-white-key"},b.whiteKeys++):"BLACK"===sisiliano.piano.OCTAVE[f].color&&(e={color:"BLACK",x:a.model.keyBoard.padding.left+(b.whiteKeys-1)*a.model.keyBoard.whiteKey.width+a.model.keyBoard.whiteKey.width/3*2,y:a.model.keyBoard.padding.top,width:a.model.keyBoard.blackKey.width,height:a.model.keyBoard.blackKey.height,index:c,octave:Math.floor(d/12),octaveIndex:f,className:"sisiliano-piano-key sisiliano-piano-black-key"},b.blackKeys++),a.model.keyBoard.keys.push(e)}a.model.viewBox.width=b.whiteKeys*a.model.keyBoard.whiteKey.width+a.model.keyBoard.padding.left+a.model.keyBoard.padding.right,a.model.viewBox.height=a.model.keyBoard.whiteKey.height+a.model.keyBoard.padding.top+a.model.keyBoard.padding.bottom,a.model.keyBoard.border.width=b.whiteKeys*a.model.keyBoard.whiteKey.width+a.model.keyBoard.borderPadding.left+a.model.keyBoard.borderPadding.right,a.model.keyBoard.border.height=a.model.keyBoard.whiteKey.height+a.model.keyBoard.borderPadding.top+a.model.keyBoard.borderPadding.bottom,a.model.keyBoard.border.x=a.model.keyBoard.keys[0].x-a.model.keyBoard.borderPadding.left,a.model.keyBoard.border.y=a.model.keyBoard.keys[0].y-a.model.keyBoard.borderPadding.top,a.applier.change("",a.model)}}(fluid),function(a){"use strict";a.defaults("sisiliano.slider",{gradeNames:["sisiliano.component"],model:{min:0,max:100,value:null,size:100,tickValue:1,status:{isActive:!1},formatValue:function(a){return Math.round(100*a)/100},title:"Abstract Slider Controller"},ariaDescription:"",selectors:{controller:".sisiliano",svg:"svg",valueLabel:".sisiliano-slider-value-text"},events:{onValueChange:null,onStatusChange:null},listeners:{onCreate:[{func:"sisiliano.slider.validateInputs",args:["{that}"]},{func:"sisiliano.slider.onInit",args:["{that}"]}],onReady:[{func:"sisiliano.slider.onMinValueChange",args:["{that}","{that}.model.min"]},{func:"sisiliano.slider.onMaxValueChange",args:["{that}","{that}.model.max"]}]},modelListeners:{value:{func:"sisiliano.slider.onValueChange",args:["{that}","{that}.model.value"]},formatValue:{func:"sisiliano.slider.onValueChange",args:["{that}","{that}.model.value"]},min:{func:"sisiliano.slider.onMinValueChange",args:["{that}","{that}.model.min"]},max:{func:"sisiliano.slider.onMaxValueChange",args:["{that}","{that}.model.max"]},"status.isActive":{func:"sisiliano.slider.onStatusChange",args:["{that}","{that}.model.status.isActive"]}}}),sisiliano.slider.onStatusChange=function(a){a.events.onStatusChange.fire()},sisiliano.slider.onInit=function(a){a.container.attr("tabindex",0),a.container.addClass("sisiliano"),a.container.attr("role","slider"),sisiliano.slider.addListeners(a)},sisiliano.slider.onMinValueChange=function(a,b){a.container.attr("aria-valuemin",b),a.applier.change("size",sisiliano.slider.getSize(a)),sisiliano.slider.onValueChange(a,a.model.value)},sisiliano.slider.onMaxValueChange=function(a,b){a.container.attr("aria-valuemax",b),a.applier.change("size",sisiliano.slider.getSize(a)),sisiliano.slider.onValueChange(a,a.model.value)},sisiliano.slider.onValueChange=function(a,b){"number"!=typeof b&&sisiliano.slider.updateTheValueInUI(a,a.model.min),b<a.model.min?(b=a.model.min,a.applier.change("value",b)):b>a.model.max?(b=a.model.max,a.applier.change("value",b)):sisiliano.slider.updateTheValueInUI(a,b)},sisiliano.slider.updateTheValueInUI=function(a,b){var c=b;a.model.formatValue&&"function"==typeof a.model.formatValue&&(c=a.model.formatValue(b)),a.container.attr("aria-valuenow",c),a.locate("valueLabel").text(c),a.events.onValueChange.fire(a,sisiliano.slider.getObviousValue(a,a.model.value))},sisiliano.slider.addListeners=function(a){var b=function(){var b=sisiliano.slider.getValue(a);38===d3.event.keyCode||39===d3.event.keyCode?(a.applier.change("value",b+a.model.tickValue),d3.event.preventDefault()):37!==d3.event.keyCode&&40!==d3.event.keyCode||(a.applier.change("value",b-a.model.tickValue),d3.event.preventDefault())};d3.select(a.container.get(0)).on("keydown",b).on("mousedown",sisiliano.slider.setSliderActiveStatus.bind(this,a,!0)).on("touchstart",sisiliano.slider.setSliderActiveStatus.bind(this,a,!0)).on("mouseup",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)).on("touchend",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1))},sisiliano.slider.setSliderActiveStatus=function(a,b){a.applier.change("status.isActive",b)},sisiliano.slider.getValue=function(a){return"number"==typeof a.model.value?a.model.value:a.model.min},sisiliano.slider.validateInputs=function(a){if(a.model.min>=a.model.max)throw new Error("Min should be less than max")},sisiliano.slider.getSize=function(a){return Math.abs(a.model.max-a.model.min)},sisiliano.slider.getValue=function(a){return"number"==typeof a.model.value?a.model.value:a.model.min},sisiliano.slider.getObviousValue=function(a,b){return b-a.model.min}}(fluid);