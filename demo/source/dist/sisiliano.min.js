var htmlTempl=htmlTempl||{};htmlTempl.templates={"src/controllers/knob/knob.html":'<div tabindex="0" class="fl-sisiliano" role="slider" aria-label="Ring Slider" aria-valuemax="100" aria-valuemin="0">\r\n    <svg\r\n            xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"\r\n            xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n            xmlns:cc="http://creativecommons.org/ns#"\r\n            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n            xmlns:svg="http://www.w3.org/2000/svg"\r\n            xmlns="http://www.w3.org/2000/svg"\r\n            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n            viewBox="0 0 300 300"\r\n            width="100%"\r\n            height="100%"\r\n            class="fl-sisiliano-knob">\r\n        <defs\r\n                id="defs4">\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6244">\r\n                <feFlood\r\n                        flood-opacity="0.4"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246" />\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248" />\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250" />\r\n                <feOffset\r\n                        dx="-1"\r\n                        dy="1"\r\n                        result="offset"\r\n                        id="feOffset6252" />\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254" />\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246" />\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248" />\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3.5"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250" />\r\n                <feOffset\r\n                        dx="2"\r\n                        dy="-2"\r\n                        result="offset"\r\n                        id="feOffset6252" />\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254" />\r\n            </filter>\r\n        </defs>\r\n\r\n        <style>\r\n            .fl-sisiliano-knob-circle {\r\n                filter: url("#filter6244");\r\n            }\r\n            .fl-sisiliano-border, .fl-sisiliano:focus .fl-sisiliano-knob-circle {\r\n                filter: url("#filter6245");\r\n            }\r\n        </style>\r\n\r\n        <g style="display:inline">\r\n            <circle\r\n                    class="fl-sisiliano-border"\r\n                    r="147" cx="150"\r\n                    cy="150">\r\n            </circle>\r\n            <circle\r\n                    class="fl-sisiliano-knob-circle fl-sisiliano-knob-background-circle"\r\n                    id="circle5634"\r\n                    r="130"\r\n                    cx="150"\r\n                    cy="150"/>\r\n            <text xmlns="http://www.w3.org/2000/svg" x="40" y="170"\r\n                  role="alert" aria-live="assertive"\r\n                  class="unselectable fl-sisiliano-knob-value-text">\r\n                100%\r\n            </text>\r\n            <circle\r\n                    class="fl-sisiliano-knob-circle fl-sisiliano-knob-value-circle"\r\n                    fill="transparent"\r\n                    id="circle5636"\r\n                    r="130"\r\n                    cx="150"\r\n                    cy="150"\r\n                    stroke-width="20"/>\r\n        </g>\r\n    </svg>\r\n</div>',"src/controllers/piano/piano.html":'<div tabindex="0" class="fl-sisiliano" role="slider" aria-label="Piano" id="{{id}}">\r\n    <svg\r\n            xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"\r\n            xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n            xmlns:cc="http://creativecommons.org/ns#"\r\n            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n            xmlns:svg="http://www.w3.org/2000/svg"\r\n            xmlns="http://www.w3.org/2000/svg"\r\n            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n            class="fl-sisiliano-piano"\r\n            width="100%"\r\n            height="100%"\r\n            viewBox="0 0 {{viewBox.width}} {{viewBox.height}}">\r\n        <defs\r\n                id="defs4">\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6244">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="0"\r\n                        dy="1"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="8"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="-3"\r\n                        dy="3.5"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246"/>\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248"/>\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3.5"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250"/>\r\n                <feOffset\r\n                        dx="2"\r\n                        dy="-2"\r\n                        result="offset"\r\n                        id="feOffset6252"/>\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254"/>\r\n            </filter>\r\n        </defs>\r\n\r\n        <style>\r\n            /* These styles have been added seperately as a fix for firefox and IE */\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-white-key {\r\n                filter: url(\'#filter6244\');\r\n            }\r\n\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-black-key {\r\n                filter: url(\'#filter6244\');\r\n            }\r\n\r\n            #{{id}}.fl-sisiliano-border {\r\n                filter: url("#filter6245");\r\n            }\r\n\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-key-pressed,\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-white-key:hover,\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-black-key:hover,\r\n            #{{id}}.fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-key-inactive:hover {\r\n                fill: {{color}};\r\n                stroke: {{color}};\r\n            }\r\n        </style>\r\n        <g style="display:inline">\r\n            <rect\r\n                    class="fl-sisiliano-border"\r\n                    height="{{keyBoard.border.height}}"\r\n                    width="{{keyBoard.border.width}}"\r\n                    x="{{keyBoard.border.x}}"\r\n                    y="{{keyBoard.border.y}}"/>\r\n            {{#each keyBoard.whiteKeys}}\r\n            <rect\r\n                    index="{{index}}"\r\n                    class="fl-sisiliano-piano-key fl-sisiliano-piano-white-key"\r\n                    height="{{height}}"\r\n                    width="{{width}}"\r\n                    x="{{x}}"\r\n                    y="{{y}}"/>\r\n            {{/each}}\r\n            {{#each keyBoard.blackKeys}}\r\n            <rect\r\n                    index="{{index}}"\r\n                    class="fl-sisiliano-piano-key fl-sisiliano-piano-black-key"\r\n                    height="{{height}}"\r\n                    width="{{width}}"\r\n                    x="{{x}}"\r\n                    y="{{y}}"/>\r\n            {{/each}}\r\n        </g>\r\n\r\n        <!--<g style="display:inline">\r\n          <rect\r\n            class="fl-sisiliano-piano-key fl-sisiliano-piano-disabledArea"\r\n            height="{{disabledArea.left.height}}"\r\n            width="{{disabledArea.left.width}}"\r\n            x="{{disabledArea.left.x}}"\r\n            y="{{disabledArea.left.y}}" />\r\n          <rect\r\n            class="fl-sisiliano-piano-key fl-sisiliano-piano-disabledArea"\r\n            height="{{disabledArea.right.height}}"\r\n            width="{{disabledArea.right.width}}"\r\n            x="{{disabledArea.right.x}}"\r\n            y="{{disabledArea.right.y}}" />\r\n        </g>-->\r\n    </svg>\r\n</div>\r\n'},function(a){"use strict";a.registerNamespace("fluid.sisiliano"),a.sisiliano.templates=htmlTempl.templates,a.registerNamespace("fluid.sisiliano.util"),a.sisiliano.util.templateCache={},a.sisiliano.util.getTemplate=function(b,c){var d=a.sisiliano.util.templateCache[c];if(d)b(d);else{var e=htmlTempl.templates[c];d=Handlebars.compile(e),a.sisiliano.util.templateCache[c]=d,b(d)}},a.sisiliano.util.addClass=function(b,c){a.sisiliano.util.removeClass(b,c);var d=$(b).attr("class"),e=d+" "+c;$(b).attr("class",e)},a.sisiliano.util.removeClass=function(a,b){var c=$(a).attr("class"),d=c.replace(new RegExp(" "+b,"g"),"").replace(new RegExp(b,"g"),"");$(a).attr("class",d)},a.sisiliano.util.getAngle=function(a,b){var c=Math.atan(Math.abs((b.x-a.x)/(b.y-a.y)))/(2*Math.PI);return a.x>b.x?a.y>b.y&&(c=.5-c):(a.y<b.y&&(c=.5-c),c+=.5),c},a.sisiliano.util.isInsideTheCircle=function(a,b,c){var d=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));return b>=d}}(fluid),function(a){"use strict";a.defaults("fluid.sisiliano.knob",{gradeNames:["fluid.viewComponent"],model:{color:"#009688",value:0,status:{isActive:!1}},selectors:{valueLabel:".fl-sisiliano-knob-value-text",valueCircle:".fl-sisiliano-knob-value-circle",knobBackgroundCircle:".fl-sisiliano-knob-background-circle",borderCircle:"fl-sisiliano-knob-circle fl-sisiliano-knob-border-circle",circles:".fl-sisiliano-knob-circle"},events:{onChange:null},listeners:{onCreate:{func:"fluid.sisiliano.knob.onCreate",args:["{that}"]}},modelListeners:{value:{func:"fluid.sisiliano.knob.onValueChange",args:["{that}","{that}.model.value"]},color:{func:"fluid.sisiliano.knob.onColorChange",args:["{that}","{that}.model.color"]},"status.isActive":{func:"fluid.sisiliano.knob.onStatusChange",args:["{that}","{that}.model.status.isActive"]}}}),a.sisiliano.knob.onStatusChange=function(a,b){var c="fl-sisiliano-knob"+(b?" fl-sisiliano-active":"");d3.select(a.container.get(0)).select(".fl-sisiliano-knob").attr("class",c)},a.sisiliano.knob.onValueChange=function(a,b){if("number"!=typeof b)b=0,a.applier.change("value",b);else if(b>100)b=100,a.applier.change("value",b);else if(0>b)b=0,a.applier.change("value",b);else if(b=Math.round(b),a.model.value<=100&&a.model.value>=0){a.locate("valueLabel").text(b+"%");var c=a.model.circumference/100*(100-b)+"px";a.locate("valueCircle").attr("stroke-dashoffset",c)}},a.sisiliano.knob.onColorChange=function(a,b){a.locate("valueCircle").css("stroke",b),a.locate("knobBackgroundCircle").css("stroke",b),a.locate("valueCircle").css("fill",b),a.locate("knobBackgroundCircle").css("fill",b),a.locate("valueLabel").css("fill",b)},a.sisiliano.knob.initOptions=function(b,c,d){for(var e in c)void 0!==d[e]&&b.applier.change(e,d[e]);a.sisiliano.knob.onColorChange(b,b.model.color),a.sisiliano.knob.onValueChange(b,b.model.value)},a.sisiliano.knob.init=function(a){var b=parseInt(a.locate("knobBackgroundCircle").attr("r"),"");a.applier.change("radius",b),a.applier.change("circumference",2*a.model.radius*Math.PI),a.locate("circles").attr("stroke-dasharray",a.model.circumference+"px")},a.sisiliano.knob.onCreate=function(b){a.sisiliano.util.getTemplate(function(c){var d=c(b.model);b.container.html(d),a.sisiliano.knob.init(b),a.sisiliano.knob.initOptions(b,b.model,b.options),a.sisiliano.knob.addListeners(b)},"src/controllers/knob/knob.html")},a.sisiliano.knob.addListeners=function(b){d3.select(document).on("mouseup",function(){b.applier.change("status.isActive",!1)}).on("click",function(){b.applier.change("status.isActive",!1)}),d3.select(b.container.get(0)).on("keydown",function(){38===d3.event.keyCode?(b.applier.change("value",b.model.value+1),d3.event.preventDefault()):40===d3.event.keyCode&&(b.applier.change("value",b.model.value-1),d3.event.preventDefault())}),d3.select(b.container.get(0)).selectAll(".fl-sisiliano-knob").on("mousedown",function(){b.applier.change("status.isActive",!0)}).on("mousemove",function(){var c=d3.mouse(b.container.find("svg").eq(0).get(0)),d={x:150,y:150},e=150,f={x:c[0],y:c[1]};if(b.model.status.isActive&&a.sisiliano.util.isInsideTheCircle(d,e,f)){var g=100*a.sisiliano.util.getAngle(d,f);b.model.value!==g&&b.applier.change("value",g)}}).on("mouseup",function(){b.applier.change("status.isActive",!1)}).on("mouseleave",function(){b.applier.change("status.isActive",!1)})}}(fluid),function(a){"use strict";a.defaults("fluid.sisiliano.piano",{gradeNames:["fluid.viewComponent"],model:{color:"#009688",keyBoard:{keys:[],length:48,start:5,whiteKey:{width:40,height:150},blackKey:{width:27,height:100},padding:{top:20,bottom:20,left:20,right:20},border:{x:0,y:0,width:600,height:170},borderPadding:{top:10,bottom:10,left:10,right:10}},viewBox:{width:600,height:170},activeArea:{start:1,end:11}},events:{onChange:null,onKeyPress:null,onKeyRelease:null},selectors:{root:".sisiliano",keyBoard:".key-board",whiteKeys:".white-key",blackKeys:".black-key",key:".key"},listeners:{onCreate:{func:"fluid.sisiliano.piano.onCreate",args:["{that}","{that}.dom.keyBoard"]}},modelListeners:{viewBox:{func:"fluid.sisiliano.piano.onChange",args:["{that}","{change}"]},"activeArea.end":{func:"fluid.sisiliano.piano.onChangeActiveArea",args:["{that}","{that}.model.keyBoard.keys","{that}.model.activeArea"]},"keyBoard.keys":{func:"fluid.sisiliano.piano.onKeysChange",args:["{that}","{that}.model.keyBoard.keys"]}}}),a.sisiliano.piano.onChange=function(){},a.sisiliano.piano.onChangeActiveArea=function(b,c,d){var e=[81,65,87,83,69,68,82,70,84,71,89,72,85,74,73,75,79,76,80,186,219,222,221],f=a.sisiliano.piano.getWhiteKeys(c);if(f.length>0){var g=f[d.start].index,h=f[d.end].index;if(g>0){var i=c[g-1];"BLACK"===i.color&&g--}if(h<c.length-1){var j=c[h+1];"BLACK"===j.color&&h++}for(var k=0,l=0;l<c.length;l++){var m=c[l];m.isActive=l>=g&&h>=l,m.isActive&&0===k&&"WHITE"===m.color&&k++,k>1&&"WHITE"===m.color&&"WHITE"===c[l-1].color&&k++,m.isActive?(m.keyCode=e[k],k++):m.keyCode=null}}a.sisiliano.piano.onKeysChange(b,c),a.sisiliano.piano.clearPressedNodes(b)},a.sisiliano.piano.onKeysChange=function(b,c){d3.select(b.container.get(0)).selectAll(".fl-sisiliano-piano-key").each(function(){var d=a.sisiliano.piano.getElementKey(d3.select(this),c);a.sisiliano.piano.updateKey(b,d,d3.select(this))})},a.sisiliano.piano.getElementKey=function(a,b){return b[a.attr("index")]},a.sisiliano.piano.onCreate=function(b){a.sisiliano.piano.generateKeyboard(b),a.sisiliano.piano.refresh(b),a.sisiliano.piano.appendListeners(b)},a.sisiliano.piano.refresh=function(b){a.sisiliano.util.getTemplate(function(c){b.model.id="fluid-sisiliano-id-"+b.id,b.model.keyBoard.whiteKeys=a.sisiliano.piano.getWhiteKeys(b.model.keyBoard.keys),b.model.keyBoard.blackKeys=a.sisiliano.piano.getBlackKeys(b.model.keyBoard.keys);var d=c(b.model);b.container.html(d),a.sisiliano.piano.onChangeActiveArea(b,b.model.keyBoard.keys,b.model.activeArea)},"src/controllers/piano/piano.html")},a.sisiliano.piano.moveTabBy=function(b,c){if(c){var d={start:b.model.activeArea.start+c,end:b.model.activeArea.end+c},e=a.sisiliano.piano.getWhiteKeys(b.model.keyBoard.keys),f=d.start>=0&&d.start<e.length&&d.end>=0&&d.end<e.length&&d.start<d.end;f&&b.applier.change("activeArea",d)}},a.sisiliano.piano.clearPressedNodes=function(b){for(var c=0;c<b.model.keyBoard.keys.length;c++){var d=b.model.keyBoard.keys[c];d.isPressed=!1,a.sisiliano.piano.updateKey(b,d),a.sisiliano.piano.releaseKey(b,d)}},a.sisiliano.piano.appendListeners=function(b){var c=!1;d3.select(document).on("mouseup",function(){c=!1}),d3.select(b.container.get(0)).selectAll(".fl-sisiliano-piano-key").on("mousedown",function(){c=!0;var d=d3.select(this).attr("index"),e=b.model.keyBoard.keys[d];c&&!e.isPressed&&(e.isPressed=!0,a.sisiliano.piano.updateKey(b,e),a.sisiliano.piano.playKey(b,e))}).on("mouseover",function(){var d=d3.select(this).attr("index"),e=b.model.keyBoard.keys[d];c&&!e.isPressed&&(e.isPressed=!0,a.sisiliano.piano.updateKey(b,e),a.sisiliano.piano.playKey(b,e))}).on("mouseup",function(){c=!1;var d=d3.select(this).attr("index"),e=b.model.keyBoard.keys[d];e.isPressed=!1,a.sisiliano.piano.updateKey(b,e),a.sisiliano.piano.releaseKey(b,e)}).on("mouseleave",function(){var c=d3.select(this).attr("index"),d=b.model.keyBoard.keys[c];d.isPressed=!1,a.sisiliano.piano.updateKey(b,d),a.sisiliano.piano.releaseKey(b,d)}),d3.select(b.container.get(0)).on("keydown",function(){var c=d3.event.keyCode,d=a.sisiliano.piano.getKeyByComputerKeyCode(c,b.model.keyBoard.keys);switch(d&&!d.isPressed&&(d.isPressed=!0,a.sisiliano.piano.updateKey(b,d),a.sisiliano.piano.playKey(b,d)),c){case 37:a.sisiliano.piano.moveTabBy(b,-1),d3.event.preventDefault();break;case 39:a.sisiliano.piano.moveTabBy(b,1),d3.event.preventDefault()}}),d3.select(b.container.get(0)).on("keyup",function(){var c=d3.event.keyCode,d=a.sisiliano.piano.getKeyByComputerKeyCode(c,b.model.keyBoard.keys);d&&(d.isPressed=!1,a.sisiliano.piano.updateKey(b,d),a.sisiliano.piano.releaseKey(b,d),d3.event.preventDefault())})},a.sisiliano.piano.playKey=function(b,c){b.events.onKeyPress.fire(c.index,a.sisiliano.piano.getFreequency(c.octave,c.octaveIndex))},a.sisiliano.piano.releaseKey=function(a,b){a.events.onKeyRelease.fire(b.index)},a.sisiliano.piano.updateKey=function(a,b,c){c||(c=a.container.find(".fl-sisiliano-piano-key[index='"+b.index+"']"));var d=b.className;d+=b.isActive?" fl-sisiliano-piano-key-active":" fl-sisiliano-piano-key-inactive",d+=b.isPressed?" fl-sisiliano-piano-key-pressed":"",c.attr("class",d)},a.sisiliano.piano.getKeyByComputerKeyCode=function(a,b){var c=b.filter(function(b){return b.keyCode===a});return 0===c.length?null:c[0]},a.sisiliano.piano.getKeysByColor=function(a,b){return a.filter(function(a){return a.color===b})},a.sisiliano.piano.getFreequency=function(a,b){var c=[261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883];return Math.pow(2,a)*c[b]},a.sisiliano.piano.OCTAVE={0:{color:"WHITE",note:"c"},1:{color:"BLACK",note:"c#"},2:{color:"WHITE",note:"d"},3:{color:"BLACK",note:"d#"},4:{color:"WHITE",note:"e"},5:{color:"WHITE",note:"f"},6:{color:"BLACK",note:"f#"},7:{color:"WHITE",note:"g"},8:{color:"BLACK",note:"g#"},9:{color:"WHITE",note:"a"},10:{color:"BLACK",note:"a#"},11:{color:"WHITE",note:"b"}},a.sisiliano.piano.getWhiteKeys=function(b){return a.sisiliano.piano.getKeysByColor(b,"WHITE")},a.sisiliano.piano.getBlackKeys=function(b){return a.sisiliano.piano.getKeysByColor(b,"BLACK")},a.sisiliano.piano.generateKeyboard=function(b){b.model.keyBoard.blackKey.width=(b.model.keyBoard.whiteKey.width-1)/3*2+1,b.model.keyBoard.blackKey.height=b.model.keyBoard.whiteKey.height/3*2,b.model.keyBoard.keys=[];for(var c={whiteKeys:0,blackKeys:0},d=0,e=b.model.keyBoard.start;e<b.model.keyBoard.length+b.model.keyBoard.start;e++,d++){var f,g=e%12;"WHITE"===a.sisiliano.piano.OCTAVE[g].color?(f={color:"WHITE",x:b.model.keyBoard.padding.left+c.whiteKeys*b.model.keyBoard.whiteKey.width,y:b.model.keyBoard.padding.top,width:b.model.keyBoard.whiteKey.width-1,height:b.model.keyBoard.whiteKey.height,index:d,octave:Math.floor(e/12),octaveIndex:g,className:"fl-sisiliano-piano-key fl-sisiliano-piano-white-key"},c.whiteKeys++):"BLACK"===a.sisiliano.piano.OCTAVE[g].color&&(f={color:"BLACK",x:b.model.keyBoard.padding.left+(c.whiteKeys-1)*b.model.keyBoard.whiteKey.width+b.model.keyBoard.whiteKey.width/3*2,y:b.model.keyBoard.padding.top,width:b.model.keyBoard.blackKey.width,height:b.model.keyBoard.blackKey.height,index:d,octave:Math.floor(e/12),octaveIndex:g,className:"fl-sisiliano-piano-key fl-sisiliano-piano-black-key"},c.blackKeys++),b.model.keyBoard.keys.push(f)}b.model.viewBox.width=c.whiteKeys*b.model.keyBoard.whiteKey.width+b.model.keyBoard.padding.left+b.model.keyBoard.padding.right,b.model.viewBox.height=b.model.keyBoard.whiteKey.height+b.model.keyBoard.padding.top+b.model.keyBoard.padding.bottom,b.model.keyBoard.border.width=c.whiteKeys*b.model.keyBoard.whiteKey.width+b.model.keyBoard.borderPadding.left+b.model.keyBoard.borderPadding.right,b.model.keyBoard.border.height=b.model.keyBoard.whiteKey.height+b.model.keyBoard.borderPadding.top+b.model.keyBoard.borderPadding.bottom,b.model.keyBoard.border.x=b.model.keyBoard.keys[0].x-b.model.keyBoard.borderPadding.left,b.model.keyBoard.border.y=b.model.keyBoard.keys[0].y-b.model.keyBoard.borderPadding.top,b.applier.change("",b.model)}}(fluid);