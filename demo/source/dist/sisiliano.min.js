var htmlTempl=htmlTempl||{};htmlTempl.templates={"src/controllers/knob/knob.html":'<div tabindex="0" class="sisiliano" role="slider" aria-label="Ring Slider" aria-valuemax="100" aria-valuemin="0">\r\n    <svg\r\n            xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"\r\n            xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n            xmlns:cc="http://creativecommons.org/ns#"\r\n            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n            xmlns:svg="http://www.w3.org/2000/svg"\r\n            xmlns="http://www.w3.org/2000/svg"\r\n            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n            viewBox="0 0 300 300"\r\n            width="100%"\r\n            height="100%">\r\n        <defs\r\n                id="defs4">\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6244">\r\n                <feFlood\r\n                        flood-opacity="0.4"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246" />\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248" />\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250" />\r\n                <feOffset\r\n                        dx="-1"\r\n                        dy="1"\r\n                        result="offset"\r\n                        id="feOffset6252" />\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254" />\r\n            </filter>\r\n            <filter\r\n                    style="color-interpolation-filters:sRGB;"\r\n                    id="filter6245">\r\n                <feFlood\r\n                        flood-opacity="0.5"\r\n                        flood-color="black"\r\n                        result="flood"\r\n                        id="feFlood6246" />\r\n                <feComposite\r\n                        in="flood"\r\n                        in2="SourceGraphic"\r\n                        operator="in"\r\n                        result="composite1"\r\n                        id="feComposite6248" />\r\n                <feGaussianBlur\r\n                        in="composite1"\r\n                        stdDeviation="3.5"\r\n                        result="blur"\r\n                        id="feGaussianBlur6250" />\r\n                <feOffset\r\n                        dx="2"\r\n                        dy="-2"\r\n                        result="offset"\r\n                        id="feOffset6252" />\r\n                <feComposite\r\n                        in="SourceGraphic"\r\n                        in2="offset"\r\n                        operator="over"\r\n                        result="composite2"\r\n                        id="feComposite6254" />\r\n            </filter>\r\n        </defs>\r\n\r\n        <style>\r\n            .knob-circle {\r\n                filter: url("#filter6244");\r\n            }\r\n            .sisiliano:focus .knob-circle {\r\n                filter: url("#filter6245");\r\n            }\r\n        </style>\r\n\r\n        <g class="ctrl"\r\n           style="display:inline;animadtion: rotarIz 1.5s linear;">\r\n            <circle class="knob-circle knob-border-circle" r="147" cx="150" cy="150">\r\n            </circle>\r\n            <circle\r\n                    class="knob-circle knob-background-circle"\r\n                    id="circle5634"\r\n                    r="130"\r\n                    cx="150"\r\n                    cy="150"/>\r\n            <text xmlns="http://www.w3.org/2000/svg" x="40" y="170"\r\n                  role="alert" aria-live="assertive"\r\n                  class="unselectable value knob-value-text">\r\n                100%\r\n            </text>\r\n            <circle\r\n                    class="knob-circle knob-value-circle"\r\n                    fill="transparent"\r\n                    id="circle5636"\r\n                    r="130"\r\n                    cx="150"\r\n                    cy="150"\r\n                    stroke-width="20"/>\r\n        </g>\r\n    </svg>\r\n</div>',"src/controllers/piano/piano.html":'<div tabindex="0" class="fl-sisiliano" role="slider" aria-label="Piano">\r\n  <svg\r\n    xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"\r\n    xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n    xmlns:cc="http://creativecommons.org/ns#"\r\n    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n    xmlns:svg="http://www.w3.org/2000/svg"\r\n    xmlns="http://www.w3.org/2000/svg"\r\n    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n    class="fl-sisiliano-piano"\r\n    width="100%"\r\n    height="100%"\r\n    viewBox="0 0 {{viewBox.width}} {{viewBox.height}}" >\r\n    <defs\r\n      id="defs4">\r\n      <filter\r\n        style="color-interpolation-filters:sRGB;"\r\n        id="filter6244">\r\n        <feFlood\r\n          flood-opacity="0.5"\r\n          flood-color="black"\r\n          result="flood"\r\n          id="feFlood6246" />\r\n        <feComposite\r\n          in="flood"\r\n          in2="SourceGraphic"\r\n          operator="in"\r\n          result="composite1"\r\n          id="feComposite6248" />\r\n        <feGaussianBlur\r\n          in="composite1"\r\n          stdDeviation="3"\r\n          result="blur"\r\n          id="feGaussianBlur6250" />\r\n        <feOffset\r\n          dx="0"\r\n          dy="1"\r\n          result="offset"\r\n          id="feOffset6252" />\r\n        <feComposite\r\n          in="SourceGraphic"\r\n          in2="offset"\r\n          operator="over"\r\n          result="composite2"\r\n          id="feComposite6254" />\r\n      </filter>\r\n      <filter\r\n        style="color-interpolation-filters:sRGB;"\r\n        id="filter6245">\r\n        <feFlood\r\n          flood-opacity="0.5"\r\n          flood-color="black"\r\n          result="flood"\r\n          id="feFlood6246" />\r\n        <feComposite\r\n          in="flood"\r\n          in2="SourceGraphic"\r\n          operator="in"\r\n          result="composite1"\r\n          id="feComposite6248" />\r\n        <feGaussianBlur\r\n          in="composite1"\r\n          stdDeviation="8"\r\n          result="blur"\r\n          id="feGaussianBlur6250" />\r\n        <feOffset\r\n          dx="-3"\r\n          dy="3.5"\r\n          result="offset"\r\n          id="feOffset6252" />\r\n        <feComposite\r\n          in="SourceGraphic"\r\n          in2="offset"\r\n          operator="over"\r\n          result="composite2"\r\n          id="feComposite6254" />\r\n      </filter>\r\n    </defs>\r\n\r\n    <style>\r\n      /* These styles have been added seperately as a fix for firefox and IE */\r\n      .fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-white-key {\r\n        filter: url(\'#filter6244\');\r\n      }\r\n      .fl-sisiliano .fl-sisiliano-piano .fl-sisiliano-piano-black-key {\r\n        filter: url(\'#filter6244\');\r\n      }\r\n    </style>\r\n    <g style="display:inline">\r\n      {{#each keyBoard.whiteKeys}}\r\n      <rect\r\n        index="{{index}}"\r\n        class="fl-sisiliano-piano-key fl-sisiliano-piano-white-key"\r\n        height="{{height}}"\r\n        width="{{width}}"\r\n        x="{{x}}"\r\n        y="{{y}}" />\r\n      {{/each}}\r\n      {{#each keyBoard.blackKeys}}\r\n      <rect\r\n        index="{{index}}"\r\n        class="fl-sisiliano-piano-key fl-sisiliano-piano-black-key"\r\n        height="{{height}}"\r\n        width="{{width}}"\r\n        x="{{x}}"\r\n        y="{{y}}" />\r\n      {{/each}}\r\n    </g>\r\n\r\n    <!--<g style="display:inline">\r\n      <rect\r\n        class="fl-sisiliano-piano-key fl-sisiliano-piano-disabledArea"\r\n        height="{{disabledArea.left.height}}"\r\n        width="{{disabledArea.left.width}}"\r\n        x="{{disabledArea.left.x}}"\r\n        y="{{disabledArea.left.y}}" />\r\n      <rect\r\n        class="fl-sisiliano-piano-key fl-sisiliano-piano-disabledArea"\r\n        height="{{disabledArea.right.height}}"\r\n        width="{{disabledArea.right.width}}"\r\n        x="{{disabledArea.right.x}}"\r\n        y="{{disabledArea.right.y}}" />\r\n    </g>-->\r\n  </svg>\r\n</div>\r\n'},function(a){"use strict";a.registerNamespace("fluid.sisiliano"),a.sisiliano.templates=htmlTempl.templates,a.registerNamespace("fluid.sisiliano.util"),a.sisiliano.util.templateCache={},a.sisiliano.util.getTemplate=function(b,c){var d=a.sisiliano.util.templateCache[c];if(d)b(d);else{var e=htmlTempl.templates["src/controllers/piano/piano.html"];d=Handlebars.compile(e),a.sisiliano.util.templateCache[c]=d,b(d)}},a.sisiliano.util.addClass=function(b,c){a.sisiliano.util.removeClass(b,c);var d=$(b).attr("class"),e=d+" "+c;$(b).attr("class",e)},a.sisiliano.util.removeClass=function(a,b){var c=$(a).attr("class"),d=c.replace(new RegExp(" "+b,"g"),"").replace(new RegExp(b,"g"),"");$(a).attr("class",d)},a.sisiliano.util.getAngle=function(a,b){var c=Math.atan(Math.pow(b.x-a.x,2)/Math.pow(b.y-a.y,2))/Math.PI;return a.x>b.x?a.y>b.y&&(c=1-c):(a.y<b.y&&(c=1-c),c+=1),c},a.sisiliano.util.isInsideTheCircle=function(a,b,c){var d=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));return b>=d}}(fluid),function(a){"use strict";a.defaults("fluid.sisiliano.knob",{gradeNames:["fluid.viewComponent","autoInit","fluid.eventedComponent"],model:{color:"#009688",value:0,status:{prev:{},mousedown:!1}},selectors:{knob:".knob-circle",valueLabel:".knob-value-text",valueRing:".knob-value-circle",knobBackgroundCircle:".knob-background-circle",borderCircle:"knob-circle knob-border-circle",rings:".knob-circle"},events:{onChange:null},listeners:{onCreate:{func:"fluid.sisiliano.knob.onCreate",args:["{that}"]}},modelListeners:{value:{func:"fluid.sisiliano.knob.onValueChange",args:["{that}","{that}.model.value"]},color:{func:"fluid.sisiliano.knob.onColorChange",args:["{that}","{that}.model.color"]}}}),a.sisiliano.knob.onValueChange=function(a,b){if("number"!=typeof b)b=0,a.applier.change("value",b);else if(b>100)b=100,a.applier.change("value",b);else if(0>b)b=0,a.applier.change("value",b);else if(b=Math.round(b),a.model.value<=100&&a.model.value>=0){a.locate("valueLabel").text(b+"%");var c=a.model.circumference/100*(100-b)+"px";a.locate("valueRing").attr("stroke-dashoffset",c)}},a.sisiliano.knob.onColorChange=function(a,b){a.locate("valueRing").css("stroke",b),a.locate("knobBackgroundCircle").css("stroke",b),a.locate("valueRing").css("fill",b),a.locate("knobBackgroundCircle").css("fill",b),a.locate("valueLabel").css("fill",b)},a.sisiliano.knob.initOptions=function(b,c,d){for(var e in c)void 0!==d[e]&&b.applier.change(e,d[e]);a.sisiliano.knob.onColorChange(b,b.model.color),a.sisiliano.knob.onValueChange(b,b.model.value)},a.sisiliano.knob.init=function(a){var b=parseInt(a.locate("knobBackgroundCircle").attr("r"),"");a.applier.change("radius",b),a.applier.change("circumference",2*a.model.radius*Math.PI),a.locate("rings").attr("stroke-dasharray",a.model.circumference+"px")},a.sisiliano.knob.onCreate=function(b){b.container.html(a.sisiliano.templates["src/controllers/knob/knob.html"]),a.sisiliano.knob.init(b),a.sisiliano.knob.initOptions(b,b.model,b.options),d3.select($(b.container).get(0)).on("keydown",function(){38===d3.event.keyCode?(b.applier.change("value",b.model.value+1),d3.event.preventDefault()):40===d3.event.keyCode&&(b.applier.change("value",b.model.value-1),d3.event.preventDefault())}).on("mousemove",function(){var c=d3.mouse($(b.container).find("svg").eq(0).get(0)),d={x:150,y:150},e=150,f={x:c[0],y:c[1]};if(b.model.status.mousedown&&a.sisiliano.util.isInsideTheCircle(d,e,f)){var g=a.sisiliano.util.getAngle(d,f)/2*100;b.model.value!==g&&b.applier.change("value",g)}}).on("mousedown",function(){b.applier.change("status.mousedown",!0)}).on("mouseup",function(){b.applier.change("status.mousedown",!1)}).on("focusout",function(){b.applier.change("status.mousedown",!1)}).on("blur",function(){b.applier.change("status.mousedown",!1)})}}(fluid),function(a){"use strict";a.defaults("fluid.sisiliano.piano",{gradeNames:["fluid.viewComponent"],model:{color:"#009688",keyBoard:{keys:[],whiteKeys:[],blackKeys:[],length:48,start:5,keyCodeListenerMap:{},whiteKey:{width:40,height:150},blackKey:{width:27,height:100},padding:{top:10,bottom:10,left:10,right:10}},viewBox:{width:600,height:170},activeArea:{start:1,end:11},disabledArea:{left:{x:0,y:5,width:100,height:160},right:{x:300,y:5,width:300,height:160}}},events:{onChange:null},selectors:{root:".sisiliano",keyBoard:".key-board",whiteKeys:".white-key",blackKeys:".black-key",key:".key"},listeners:{onCreate:{func:"fluid.sisiliano.piano.onCreate",args:["{that}","{that}.dom.keyBoard"]}},modelListeners:{viewBox:{func:"fluid.sisiliano.piano.onChange",args:["{that}","{change}"]}}}),a.sisiliano.piano.onChange=function(){},a.sisiliano.piano.onCreate=function(b){a.sisiliano.piano.generateKeyboard(b),a.sisiliano.piano.appendListeners(b),a.sisiliano.piano.moveTabBy(b,0),a.sisiliano.piano.refresh(b),a.sisiliano.piano.updateTheDisabledAreaUI(b)},a.sisiliano.piano.refresh=function(b){a.sisiliano.util.getTemplate(function(a){var c=a(b.model);b.container.html(c)},"src/templates/piano.html")},a.sisiliano.piano.updateTheDisabledAreaUI=function(b){for(var c=b.container.find(".fl-sisiliano-piano-key"),d=0;d<c.length;d++)a.sisiliano.util.removeClass(c[d],"fl-sisiliano-piano-key-pressed");var e=b.container.find(".fl-sisiliano-piano-white-key");for(d=0;d<e.length;d++)d>=b.model.activeArea.start&&d<=b.model.activeArea.end?a.sisiliano.util.removeClass(e[d],"fl-sisiliano-piano-key-inactive"):a.sisiliano.util.addClass(e[d],"fl-sisiliano-piano-key-inactive")},a.sisiliano.piano.moveTabBy=function(b,c){function d(b){return a.sisiliano.piano.OCTAVE[b.octaveIndex].color}function e(a,b,c){a&&d(a)===b?g[c]=a:g[c]=null}var f=a.sisiliano.piano.COMPUTER_KEYBOARD_CODES_FOR_PIANO,g=b.model.keyBoard.keyCodeListenerMap;if(c){var h={start:b.model.activeArea.start+c,end:b.model.activeArea.end+c},i=h.start>=0&&h.start<b.model.keyBoard.whiteKeys.length&&h.end>=0&&h.end<b.model.keyBoard.whiteKeys.length&&h.start<h.end;i&&(b.model.activeArea.start=h.start,b.model.activeArea.end=h.end)}for(var j=b.model.activeArea.start,k=0;j<=b.model.activeArea.end;j++){var l=b.model.keyBoard.whiteKeys[j];0===k&&e(l.prev,"BLACK",f[k++]),e(l,"WHITE",f[k++]),e(l.next,"BLACK",f[k++])}b.model.disabledArea.left.width=b.model.activeArea.start*b.model.keyBoard.whiteKey.width,b.model.disabledArea.right.width=(b.model.keyBoard.whiteKeys.length-b.model.activeArea.end)*b.model.keyBoard.whiteKey.width,b.model.activeArea.end<b.model.keyBoard.whiteKeys.length&&(b.model.disabledArea.right.x=b.model.keyBoard.whiteKeys[b.model.activeArea.end].x+b.model.keyBoard.whiteKey.width)},a.sisiliano.piano.appendListeners=function(b){function c(a,b){a.container.find(".fl-sisiliano-piano-key[index='"+b.index+"']").attr("class",b.className+" "+b.statusClass)}var d=b.model.keyBoard.keyCodeListenerMap,e=b.options.context;if(e){var f=e.createGain(),g={};f.gain.value=.3,f.connect(e.destination)}var h=[261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883],i=function(a,b){return Math.pow(2,a)*h[b]};b.container.on("keydown",function(h){var j=h.keyCode,k=d[j];if(k&&"fl-sisiliano-piano-key-pressed"!==k.statusClass){k.statusClass="fl-sisiliano-piano-key-pressed",c(b,k);var l=e.createOscillator();l.type="square",l.frequency.value=i(k.octave,k.octaveIndex),l.connect(f),l.start(0),g[k.index]=l}switch(j){case 37:a.sisiliano.piano.moveTabBy(b,-1),a.sisiliano.piano.updateTheDisabledAreaUI(b);break;case 39:a.sisiliano.piano.moveTabBy(b,1),a.sisiliano.piano.updateTheDisabledAreaUI(b)}return!1}),b.container.on("keypress",function(){}),b.container.on("keyup",function(a){var e=a.keyCode,f=d[e];if(f&&"fl-sisiliano-piano-key-pressed"===f.statusClass){f.statusClass=null,c(b,f);var h=g[f.index];g[f.index]=null,h.stop(0),h.disconnect()}return!1})},a.sisiliano.piano.OCTAVE={0:{color:"WHITE",note:"c"},1:{color:"BLACK",note:"c#"},2:{color:"WHITE",note:"d"},3:{color:"BLACK",note:"d#"},4:{color:"WHITE",note:"e"},5:{color:"WHITE",note:"f"},6:{color:"BLACK",note:"f#"},7:{color:"WHITE",note:"g"},8:{color:"BLACK",note:"g#"},9:{color:"WHITE",note:"a"},10:{color:"BLACK",note:"a#"},11:{color:"WHITE",note:"b"}},a.sisiliano.piano.COMPUTER_KEYBOARD_CODES_FOR_PIANO=[81,65,87,83,69,68,82,70,84,71,89,72,85,74,73,75,79,76,80,186,219,222,221],a.sisiliano.piano.generateKeyboard=function(b){b.model.keyBoard.blackKey.width=(b.model.keyBoard.whiteKey.width-1)/3*2+1,b.model.keyBoard.blackKey.height=b.model.keyBoard.whiteKey.height/3*2,b.model.keyBoard.keyCodeListenerMap={},b.model.keyBoard.whiteKeys=[],b.model.keyBoard.blackKeys=[];for(var c;c<a.sisiliano.piano.COMPUTER_KEYBOARD_CODES_FOR_PIANO.length;c++)b.model.keyBoard.keyCodeListenerMap=a.sisiliano.piano.COMPUTER_KEYBOARD_CODES_FOR_PIANO[c];for(var d=b.model.keyBoard.start;d<b.model.keyBoard.length+b.model.keyBoard.start;d++){var e,f=d%12;"WHITE"===a.sisiliano.piano.OCTAVE[f].color?(e={x:b.model.keyBoard.padding.left+b.model.keyBoard.whiteKeys.length*b.model.keyBoard.whiteKey.width,y:b.model.keyBoard.padding.top,width:b.model.keyBoard.whiteKey.width-1,height:b.model.keyBoard.whiteKey.height,index:d,octave:Math.floor(d/12),octaveIndex:f,className:"fl-sisiliano-piano-key fl-sisiliano-piano-white-key"},b.model.keyBoard.whiteKeys.push(e)):"BLACK"===a.sisiliano.piano.OCTAVE[f].color&&(e={x:b.model.keyBoard.padding.left+(b.model.keyBoard.whiteKeys.length-1)*b.model.keyBoard.whiteKey.width+b.model.keyBoard.whiteKey.width/3*2,y:b.model.keyBoard.padding.top,width:b.model.keyBoard.blackKey.width,height:b.model.keyBoard.blackKey.height,index:d,octave:Math.floor(d/12),octaveIndex:f,className:"fl-sisiliano-piano-key fl-sisiliano-piano-black-key"},b.model.keyBoard.blackKeys.push(e)),0!==b.model.keyBoard.keys.length&&(e.prev=b.model.keyBoard.keys[b.model.keyBoard.keys.length-1],b.model.keyBoard.keys[b.model.keyBoard.keys.length-1].next=e),b.model.keyBoard.keys.push(e)}b.model.viewBox.width=b.model.keyBoard.whiteKeys.length*b.model.keyBoard.whiteKey.width+b.model.keyBoard.padding.left+b.model.keyBoard.padding.right,b.model.viewBox.height=b.model.keyBoard.whiteKey.height+b.model.keyBoard.padding.top+b.model.keyBoard.padding.bottom}}(fluid);