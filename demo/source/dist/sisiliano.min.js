var htmlTempl=htmlTempl||{};htmlTempl.templates={"src/controllers/knob/knob.html":'<svg\r\n        id="{{id}}"\r\n        aria-hidden="true"\r\n        viewBox="0 0 300 300"\r\n        width="100%"\r\n        height="100%"\r\n        class="sisiliano-knob">\r\n    <defs\r\n            id="defs4">\r\n        <filter style="color-interpolation-filters:sRGB;" id="{{id}}-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="4" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n        <filter style="color-interpolation-filters:sRGB;" id="{{id}}-hover-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="6" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n    </defs>\r\n\r\n    <style>\r\n        #{{id}} .sisiliano-knob-circle,\r\n        #{{id}} .sisiliano-border {\r\n            filter: url("#{{id}}-drop-shadow");\r\n        }\r\n\r\n        #{{id}} .sisiliano:focus .sisiliano-knob-circle {\r\n            filter: url("#{{id}}-hover-drop-shadow");\r\n        }\r\n    </style>\r\n\r\n    <rect\r\n            class="sisiliano-border-div sisiliano-border"\r\n            width="100%"\r\n            height="100%"\r\n            rx="50%"\r\n            ry="50%"\r\n            x="0"\r\n            y="0">\r\n    </rect>\r\n\r\n    <g class="sisiliano-controller-div">\r\n        <circle\r\n                class="sisiliano-knob-circle sisiliano-knob-background-circle"\r\n                id="circle5634"\r\n                r="130"\r\n                cx="150"\r\n                cy="150"/>\r\n        <text xmlns="http://www.w3.org/2000/svg" x="40" y="170"\r\n              class="unselectable sisiliano-knob-value-text">\r\n            100\r\n        </text>\r\n        <circle\r\n                class="sisiliano-knob-circle sisiliano-knob-value-circle"\r\n                fill="transparent"\r\n                id="circle5636"\r\n                r="130"\r\n                cx="150"\r\n                cy="150"\r\n                transform="rotate(90, 150, 150)"\r\n                stroke-width="20"/>\r\n    </g>\r\n</svg>',"src/controllers/linear-slider/linear-slider.html":'<svg\r\n        id="{{id}}"\r\n        aria-hidden="true"\r\n        width="100%"\r\n        height="100%"\r\n        class="sisiliano-linear-slider">\r\n    <defs\r\n            id="defs4">\r\n        <filter style="color-interpolation-filters:sRGB;" id="{{id}}-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="4" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n        <filter style="color-interpolation-filters:sRGB;" id="{{id}}-hover-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n            <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n            <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n            <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n            <feGaussianBlur in="offset" stdDeviation="6" result="blur"></feGaussianBlur>\r\n            <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n        </filter>\r\n    </defs>\r\n\r\n    <style>\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-background-rect,\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-value-rect,\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-value-pointer,\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-value-pointer-hover,\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-value-label,\r\n        #{{id}}.sisiliano-linear-slider .sisiliano-border {\r\n            filter: url("#{{id}}-drop-shadow");\r\n        }\r\n\r\n        .sisiliano:focus #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-background-rect,\r\n        .sisiliano:focus #{{id}}.sisiliano-linear-slider .sisiliano-linear-slider-value-rect {\r\n            filter: url("#{{id}}-hover-drop-shadow");\r\n        }\r\n    </style>\r\n\r\n    <rect\r\n            class="sisiliano-border-div sisiliano-border"\r\n            width="100%"\r\n            height="100%"\r\n            x="0"\r\n            y="0">\r\n    </rect>\r\n\r\n    <g class="sisiliano-controller-div">\r\n        <rect\r\n                class="sisiliano-linear-slider-rect sisiliano-linear-slider-background-rect"\r\n                height="8"\r\n                width="10"\r\n                x="40"\r\n                y="37"/>\r\n        <rect\r\n                class="sisiliano-linear-slider-rect sisiliano-linear-slider-value-rect"\r\n                height="10"\r\n                width="200"\r\n                x="40"\r\n                y="36"/>\r\n        <g class="sisiliano-linear-slider-ruler"></g>\r\n        <rect\r\n                class="sisiliano-linear-slider-value-pointer sisiliano-linear-slider-value-pointer-hover"\r\n                width="30"\r\n                height="30"\r\n                rx="50%"\r\n                ry="50%"\r\n                x="90"\r\n                y="26">\r\n        </rect>\r\n        <rect\r\n                class="sisiliano-linear-slider-value-pointer sisiliano-linear-slider-value-pointer"\r\n                width="20"\r\n                height="20"\r\n                rx="50%"\r\n                ry="50%"\r\n                x="90"\r\n                y="31">\r\n        </rect>\r\n        <rect\r\n                class="sisiliano-linear-slider-value-label"\r\n                x="10"\r\n                y="0"\r\n                fill="{{color}}"\r\n                width="50"\r\n                height="20"\r\n                rx="2"\r\n                ry="2">\r\n        </rect>\r\n        <text text-anchor="middle"\r\n              x="10"\r\n              y="15"\r\n              class="unselectable sisiliano-linear-slider-value-text">\r\n            100\r\n        </text>\r\n    </g>\r\n</svg>',"src/controllers/piano/piano.html":'<div tabindex="0" class="sisiliano" aria-label="{{title}} ,{{description}}" id="{{id}}">\r\n    <svg\r\n            class="sisiliano-piano"\r\n            width="100%"\r\n            height="100%"\r\n            viewBox="0 0 {{viewBox.width}} {{viewBox.height}}">\r\n        <defs\r\n                id="defs4">\r\n            <filter style="color-interpolation-filters:sRGB;" id="{{id}}-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n                <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n                <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n                <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n                <feGaussianBlur in="offset" stdDeviation="4" result="blur"></feGaussianBlur>\r\n                <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n            </filter>\r\n            <filter style="color-interpolation-filters:sRGB;" id="{{id}}-hover-drop-shadow" x="-100%" y="-100%" width="300%" height="400%">\r\n                <feFlood flood-opacity="0.5" flood-color="{{color.[1]}}" result="flood"></feFlood>\r\n                <feComposite in="flood" in2="SourceGraphic" operator="in" result="comp"></feComposite>\r\n                <feOffset dx="0" dy="0" result="offset"></feOffset>\r\n                <feGaussianBlur in="offset" stdDeviation="6" result="blur"></feGaussianBlur>\r\n                <feBlend in="SourceGraphic" in2="blur" mode="normal"></feBlend>\r\n            </filter>\r\n        </defs>\r\n\r\n        <style>\r\n            /* These styles have been added seperately as a fix for firefox and IE */\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-white-key {\r\n                filter: url(\'#{{id}}-drop-shadow\');\r\n            }\r\n\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-black-key {\r\n                filter: url(\'#{{id}}-drop-shadow\');\r\n            }\r\n\r\n            #{{id}}.sisiliano-border {\r\n                filter: url("#{{id}}-hover-drop-shadow");\r\n            }\r\n\r\n            #{{id}}.sisiliano .sisiliano-piano .sisiliano-piano-key-pressed {\r\n                fill: {{color.[0]}};\r\n                stroke: {{color.[0]}};\r\n            }\r\n        </style>\r\n        <rect\r\n                class="sisiliano-border-div sisiliano-border"\r\n                width="100%"\r\n                height="100%"\r\n                x="0"\r\n                y="0">\r\n        </rect>\r\n        <g style="display:inline" class="sisiliano-piano-key-board sisiliano-controller-div">\r\n        </g>\r\n    </svg>\r\n</div>\r\n'},function(a){"use strict";a.registerNamespace("sisiliano"),sisiliano.templates=htmlTempl.templates,a.registerNamespace("sisiliano.util"),sisiliano.util.templateCache={},sisiliano.util.getTemplate=function(a,b){var c=sisiliano.util.templateCache[b];if(c)a(c);else{var d=htmlTempl.templates[b];c=Handlebars.compile(d),sisiliano.util.templateCache[b]=c,a(c)}},sisiliano.util.addClass=function(a,b){sisiliano.util.removeClass(a,b);var c=$(a).attr("class"),d=c+" "+b;$(a).attr("class",d)},sisiliano.util.removeClass=function(a,b){var c=$(a).attr("class"),d=c.replace(new RegExp(" "+b,"g"),"").replace(new RegExp(b,"g"),"");$(a).attr("class",d)},sisiliano.util.getAngle=function(a,b){var c=Math.atan(Math.abs((b.x-a.x)/(b.y-a.y)))/(2*Math.PI);return a.x>b.x?a.y>b.y&&(c=.5-c):(a.y<b.y&&(c=.5-c),c+=.5),c},sisiliano.util.isInsideTheCircle=function(a,b,c){var d=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));return b>=d},sisiliano.util.applyStyles=function(b,c,d){var e="";a.each(c,function(a,b){(!d||d.indexOf(b.toLowerCase())<0)&&(e+=b+":"+a+";")}),b.attr("style",e)},sisiliano.util.applyStylesToTheElement=function(b,c,d){if(a.each(c,function(a,c){"object"!=typeof a&&(d.attributes.indexOf(c)>=0?"class"===c?b.attr(c,b.attr(c)+" "+a):b.attr(c,a):b.css(c,a))}),c.status){var e=c.status;"object"!=typeof value&&(e=[e]),a.each(e,function(a){sisiliano.util.applyStylesToTheElement(b,c.statuses[a],d)})}}}(fluid),function(a){"use strict";a.defaults("sisiliano.util.ariaDescription",{gradeNames:"fluid.component",ariaDescription:"",listeners:{onCreate:{func:"sisiliano.util.ariaDescription.onCreate",args:["{that}"]}}}),sisiliano.util.ariaDescription.onCreate=function(a){var b=$("#sisiliano-component-guide-descriptions");0===b.length&&(b=$("<div id='sisiliano-component-guide-descriptions' style='visibility: hidden'></div>"),$("body").append(b));var c=(a.typeName.replace(/\./g,"-")+"-guide-description").toLowerCase(),d=$("#"+c);0===d.length&&(d=$("<div id='"+c+"'>"+a.options.ariaDescription+"</div>"),b.append(d)),a.container.attr("aria-describedby",c)}}(fluid),function(a){"use strict";a.defaults("sisiliano.util.colorable",{gradeNames:"fluid.component",model:{color:["#009688","#000000"]},events:{onColorChange:null},modelListeners:{"color.*":{func:"sisiliano.util.colorable.onColorChange",args:["{that}","{that}.model.color"]}},listeners:{onCreate:{func:"sisiliano.util.colorable.onColorChange",args:["{that}","{that}.model.color"]}}}),sisiliano.util.colorable.defaultColor=["#009688","#000000"],sisiliano.util.colorable.onColorChange=function(a,b){b?"object"==typeof b&&b.length?1===b.length?(b.push(sisiliano.util.colorable.defaultColor[1]),a.applier.change("color",b)):a.events.onColorChange.fire():(b=[b],a.applier.change("color",b)):a.applier.change("color",[sisiliano.util.colorable.defaultColor[0],sisiliano.util.colorable.defaultColor[1]])}}(fluid),function(a){"use strict";a.defaults("sisiliano.component",{gradeNames:["sisiliano.util.colorable","sisiliano.util.ariaDescription","fluid.viewComponent"],model:{template:""},events:{onReady:null},selectors:{svg:"svg"},listeners:{onCreate:[{func:"sisiliano.component.onTemplateChange",args:["{that}","{that}.options.template"]},{func:"sisiliano.component.onInit",args:["{that}"]}],onReady:[{func:"{that}.events.onColorChange.fire",args:["{that}","{that}.model.color"]}]},styleRules:{attributes:["class","cx","cy","stroke","stroke-dasharray","stroke-dashoffset","stroke-width","x","y","width","height","fill","fill-opacity","stroke-opacity","transform","r"]}}),sisiliano.component.onInit=function(a){a.container.attr("tabindex",0),a.container.addClass("sisiliano"),a.locate("svg").mousedown(function(b){b.preventDefault(),a.container.focus()})},sisiliano.component.onTemplateChange=function(a,b){b?(a.applier.change("id","fluid-sisiliano-id-"+a.id),sisiliano.util.getTemplate(function(b){var c=b(a.model);a.container.html(c),a.events.onReady.fire()},b)):a.events.onReady.fire()},a.defaults("sisiliano.border",{gradeNames:["sisiliano.component"],model:{styles:{border:{padding:{left:2,right:2,top:2,bottom:2},margin:{left:3,right:3,top:3,bottom:3}},controller:{width:10,height:10}},viewBox:{width:10,height:10}},selectors:{controller:".sisiliano-controller-div",border:".sisiliano-border-div"},listeners:{onReady:[{func:"sisiliano.border.onControllerStyleChange",args:["{that}","{that}.model.styles"]},{func:"sisiliano.border.onBorderStyleChange",args:["{that}","{that}.model.styles"]}]},modelListeners:{"viewBox.*":{func:"sisiliano.border.onViewBoxChange",args:["{that}","{that}.model.viewBox"]},"styles.controller.*":{func:"sisiliano.border.onControllerStyleChange",args:["{that}","{that}.model.styles"]},"styles.border.*":{func:"sisiliano.border.onBorderStyleChange",args:["{that}","{that}.model.styles"]}}}),sisiliano.border.onViewBoxChange=function(a,b){d3.select(a.locate("svg").get(0)).attr("viewBox","0 0 "+b.width+" "+b.height)},sisiliano.border.onResize=function(a,b){if(b.controller.height&&!b.controller.width){var c=a.container.height(),d=a.container.width(),e=b.controller.height+b.border.padding.top+b.border.padding.bottom+b.border.margin.top+b.border.margin.bottom,f=d/c*e;a.applier.change("styles.controller.width",f-b.border.padding.left-b.border.padding.right-b.border.margin.left-b.border.margin.right)}},sisiliano.border.onBorderStyleChange=function(a,b){sisiliano.border.onResize(a,b),a.applier.change("styles.border.width",b.controller.width+b.border.padding.left+b.border.padding.right),a.applier.change("styles.border.height",b.controller.height+b.border.padding.top+b.border.padding.bottom),a.applier.change("styles.border.x",b.border.margin.left),a.applier.change("styles.border.y",b.border.margin.top),a.applier.change("styles.controller.x",b.border.x+b.border.padding.left),a.applier.change("styles.controller.y",b.border.y+b.border.padding.top),a.locate("border").attr("width",b.border.width).attr("height",b.border.height).attr("x",b.border.x).attr("y",b.border.y),a.locate("controller").attr("transform","translate("+b.controller.x+","+b.controller.y+")"),a.applier.change("viewBox",{width:b.border.width+b.border.margin.left+b.border.margin.right,height:b.border.height+b.border.margin.top+b.border.margin.bottom})},sisiliano.border.onControllerStyleChange=function(a,b){sisiliano.border.onResize(a,b),a.locate("controller").attr("width",b.controller.width).attr("height",b.controller.height),sisiliano.border.onBorderStyleChange(a,b)}}(fluid),function(a){"use strict";a.defaults("sisiliano.util.makeMusic",{gradeNames:["fluid.component"],listeners:{onCreate:{func:"sisiliano.util.makeMusic.onCreate",args:["{that}"]}},invokers:{play:{funcName:"sisiliano.util.makeMusic.play",args:["{that}","{arguments}.0","{arguments}.1"]},release:{funcName:"sisiliano.util.makeMusic.release",args:["{that}","{arguments}.0","{arguments}.1"]}},context:null,masterGain:null,nodes:{}}),sisiliano.util.makeMusic.onCreate=function(a){var b=window.AudioContext||window.webkitAudioContext;b&&(a.context=new b),a.nodes={},a.context&&(a.masterGain=a.context.createGain(),a.masterGain.gain.value=.3,a.masterGain.connect(a.context.destination))},sisiliano.util.makeMusic.play=function(a,b,c){if(a.context){var d=a.context.createOscillator();d.type="triangle",d.frequency.value=c,d.connect(a.masterGain),d.start(0),a.nodes[b]=d}},sisiliano.util.makeMusic.release=function(a,b){var c=a.nodes[b];c&&(c.stop(0),c.disconnect(),a.nodes[b]=null)}}(fluid),function(a){"use strict";a.defaults("sisiliano.knob",{gradeNames:["sisiliano.slider"],template:"src/controllers/knob/knob.html",model:{styles:{valueText:{x:40,y:170,"class":"unselectable sisiliano-knob-value-text","font-family":"inherit",fill:"#009688","font-style":"italic","font-size":"80px"},valueKnob:{"class":"sisiliano-knob-circle sisiliano-knob-value-circle",cx:150,cy:150,fill:"transparent","fill-opacity":0,r:130,stroke:"#009688","stroke-width":20,transform:"rotate(90, 150, 150)"},backgroundKnob:{"class":"sisiliano-knob-circle sisiliano-knob-background-circle",cx:150,cy:150,fill:"white","fill-opacity":0,r:130,stroke:"white","stroke-dashoffset":0,"stroke-opacity":.4,"stroke-width":10}}},ariaDescription:"Use up and down keys to increase and decrease the value. If you are using the mouse, Drag around the center to adjust the value",selectors:{svg:"svg",valueLabel:".sisiliano-knob-value-text",valueCircle:".sisiliano-knob-value-circle",knobBackgroundCircle:".sisiliano-knob-background-circle",borderCircle:"sisiliano-knob-circle sisiliano-knob-border-circle",circles:".sisiliano-knob-circle"},listeners:{onReady:[{func:"sisiliano.knob.onRadiusChange",args:["{that}","{that}.model.styles.valueKnob.r"]},{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueLabel","{that}.model.styles.valueText","{that}.options.styleRules"]},{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueCircle","{that}.model.styles.valueKnob","{that}.options.styleRules"]},{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.knobBackgroundCircle","{that}.model.styles.backgroundKnob","{that}.options.styleRules"]},{func:"sisiliano.knob.addListeners",args:["{that}"]}],onValueChange:{func:"sisiliano.knob.onValueChange",args:["{arguments}.0","{arguments}.1","{arguments}.2","{arguments}.3"]},onColorChange:{func:"sisiliano.knob.onColorChange",args:["{that}","{that}.model.color"]},onStatusChange:{func:"sisiliano.knob.onStatusChange",args:["{that}","{that}.model.status.isActive"]}},modelListeners:{"styles.valueKnob.r":{func:"sisiliano.knob.onRadiusChange",args:["{that}","{that}.model.styles.valueKnob.r"]},"styles.valueText.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueLabel","{that}.model.styles.valueText","{that}.options.styleRules"]},"styles.valueKnob.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueCircle","{that}.model.styles.valueKnob","{that}.options.styleRules"]},"styles.backgroundKnob.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.knobBackgroundCircle","{that}.model.styles.backgroundKnob","{that}.options.styleRules"]}}}),sisiliano.knob.onRadiusChange=function(a,b){var c=sisiliano.knob.getCircumference(b);a.applier.change("styles.valueKnob.stroke-dasharray",c)},sisiliano.knob.onStatusChange=function(a,b){var c="sisiliano-knob"+(b?" sisiliano-active":"");d3.select(a.container.get(0)).select(".sisiliano-knob").attr("class",c)},sisiliano.knob.onValueChange=function(a,b){var c=a.model.size,d=sisiliano.knob.getCircumference(a.model.styles.valueKnob.r),e=d/c*(c-b);a.applier.change("styles.valueKnob.stroke-dashoffset",e)},sisiliano.knob.getCircumference=function(a){return 2*a*Math.PI},sisiliano.knob.onColorChange=function(a,b){a.applier.change("styles.valueKnob.fill",b[0]),a.applier.change("styles.valueKnob.stroke",b[0]),a.applier.change("styles.backgroundKnob.fill",b[0]),a.applier.change("styles.backgroundKnob.stroke",b[0]),a.applier.change("styles.valueText.fill",b[0])},sisiliano.knob.addListeners=function(a){var b=function(){if(a.model.status.isActive){var b=d3.mouse(a.container.find("svg").eq(0).get(0)),c={x:150,y:150},d={x:b[0],y:b[1]};sisiliano.knob.setValueByAngle(a,c,d),d3.event.preventDefault()}},c=function(b){if(a.model.status.isActive){var c=a.locate("svg");if(c&&c.length>0){var d=c.offset(),e={x:d.left+c.width()/2,y:d.top+c.height()/2},f={x:b.pageX,y:b.pageY};sisiliano.knob.setValueByAngle(a,e,f)}b.preventDefault(b)}};document.addEventListener("mousemove",c),document.addEventListener("pointermove",c),document.addEventListener("touchmove",c),d3.select(a.container.get(0)).on("mousemove",b).on("pointermove",b).on("touchmove",b)},sisiliano.knob.setValueByAngle=function(a,b,c){var d=sisiliano.util.getAngle(b,c)*a.model.size;a.model.value!==d&&a.applier.change("value",d+a.model.min)}}(fluid),function(a){"use strict";a.defaults("sisiliano.linearSlider",{gradeNames:["sisiliano.border","sisiliano.slider"],defaultViewBox:[0,0,500,50],ariaDescription:"Linear slider, the value can be adjusted by arrow keys. If you are using the mouse, drag along the slider",template:"src/controllers/linear-slider/linear-slider.html",model:{styles:{pointer:{label:{padding:{left:3,right:3,top:3,bottom:3},margin:{left:0,right:0,top:0,bottom:12}},labelText:{"font-size":"20px",fill:"white"},valuePointer:{width:30,height:30,rx:"50%",ry:"50%"},valuePointerShadow:{width:110,height:110,rx:"50%",ry:"50%"}},ruler:{line:{width:1,height:40},value:{"font-size":"20px"}},sliderBar:{valueBar:{height:10},backgroundBar:{height:8},padding:{left:80,right:80,top:80,bottom:80}}},rulerPoints:[0,20,30,40,50,60,70,80,90,100],orientation:"vertical",title:"linearSlider Controller",description:""},selectors:{controller:".sisiliano-controller-div",svg:"svg",valueLabel:".sisiliano-linear-slider-value-text",valueLabelRect:".sisiliano-linear-slider-value-label",valueRect:".sisiliano-linear-slider-value-rect",backgroundRect:".sisiliano-linear-slider-background-rect",rects:".sisiliano-linear-slider-rect",valueCircle:".sisiliano-linear-slider-value-circle",valueCircleHover:".sisiliano-linear-slider-value-circle-hover",valuePointer:".sisiliano-linear-slider-value-pointer",valuePointerHover:".sisiliano-linear-slider-value-pointer-hover",ruler:".sisiliano-linear-slider-ruler",rulerLines:".sisiliano-linear-slider-ruler-line",rulerValues:".sisiliano-linear-slider-ruler-value"},listeners:{onValueChange:{func:"sisiliano.linearSlider.onValueChange",args:["{arguments}.0","{arguments}.1"]},onColorChange:{func:"sisiliano.linearSlider.onColorChange",args:["{that}","{that}.model.color"]},onStatusChange:{func:"sisiliano.linearSlider.onStatusChange",args:["{that}","{that}.model.status.isActive"]},onReady:[{func:"sisiliano.linearSlider.onResize",args:["{that}"]},{func:"sisiliano.linearSlider.drawNotches",args:["{that}"]},{func:"sisiliano.linearSlider.addListeners",args:["{that}"]}]},modelListeners:{"styles.controller.*":{func:"sisiliano.linearSlider.onSliderStyleChange",args:["{that}","{that}.model.styles"]},"styles.sliderBar.valueBar":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueRect","{that}.model.styles.sliderBar.valueBar","{that}.options.styleRules"]},"styles.sliderBar.backgroundBar":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.backgroundRect","{that}.model.styles.sliderBar.backgroundBar","{that}.options.styleRules"]},"styles.pointer.label.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueLabelRect","{that}.model.styles.pointer.label","{that}.options.styleRules"]},"styles.pointer.labelText.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valueLabel","{that}.model.styles.pointer.labelText","{that}.options.styleRules"]},"styles.pointer.valuePointer.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valuePointer","{that}.model.styles.pointer.valuePointer","{that}.options.styleRules"]},"styles.pointer.valuePointerShadow.*":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.valuePointerHover","{that}.model.styles.pointer.valuePointerShadow","{that}.options.styleRules"]},"styles.ruler.line":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.rulerLines","{that}.model.styles.ruler.line","{that}.options.styleRules"]},"styles.ruler.value":{func:"sisiliano.util.applyStylesToTheElement",args:["{that}.dom.rulerValues","{that}.model.styles.ruler.value","{that}.options.styleRules"]}}}),sisiliano.linearSlider.onSliderStyleChange=function(a,b){b.controller.width&&b.controller.height&&(sisiliano.linearSlider.onSliderBarStyleChange(a),sisiliano.linearSlider.drawNotches(a),sisiliano.linearSlider.onSliderPointerStyleChange(a),sisiliano.slider.onValueChange(a,a.model.value))},sisiliano.linearSlider.onSliderBarStyleChange=sisiliano.linearSlider.onSliderPointerStyleChange=function(a){var b=a.model.styles.sliderBar.backgroundBar.height/2+a.model.styles.sliderBar.padding.top;a.applier.change("styles.sliderBar.valueBar.x",a.model.styles.sliderBar.padding.left),a.applier.change("styles.sliderBar.valueBar.y",b-a.model.styles.sliderBar.valueBar.height/2),a.applier.change("styles.sliderBar.valueBar.width",a.model.styles.controller.width-a.model.styles.sliderBar.padding.left-a.model.styles.sliderBar.padding.right),a.applier.change("styles.sliderBar.valueBar.height",a.model.styles.sliderBar.valueBar.height),a.applier.change("styles.sliderBar.backgroundBar.x",a.model.styles.sliderBar.padding.left),a.applier.change("styles.sliderBar.backgroundBar.y",b-a.model.styles.sliderBar.backgroundBar.height/2),a.applier.change("styles.sliderBar.backgroundBar.width",a.model.styles.controller.width-a.model.styles.sliderBar.padding.left-a.model.styles.sliderBar.padding.right),a.applier.change("styles.sliderBar.backgroundBar.height",a.model.styles.sliderBar.backgroundBar.height)},sisiliano.linearSlider.onSliderPointerLabelStyleChange=sisiliano.linearSlider.onSliderPointerStyleChange=function(a){var b=a.model.styles.sliderBar.backgroundBar.height/2+a.model.styles.sliderBar.padding.top;if(a.applier.change("styles.pointer.labelText.y",b-a.model.styles.pointer.valuePointer.height/2-a.model.styles.pointer.label.padding.bottom-a.model.styles.pointer.label.margin.bottom),a.locate("valueLabel").length>0){var c=d3.select(a.locate("valueLabel").get(0))[0][0].getBBox();a.applier.change("styles.pointer.label.x",c.x-a.model.styles.pointer.label.padding.left),a.applier.change("styles.pointer.label.y",c.y-a.model.styles.pointer.label.padding.top),a.applier.change("styles.pointer.label.width",c.width+a.model.styles.pointer.label.padding.left+a.model.styles.pointer.label.padding.right),a.applier.change("styles.pointer.label.height",c.height+a.model.styles.pointer.label.padding.bottom+a.model.styles.pointer.label.padding.top)}},sisiliano.linearSlider.onSliderPointerStyleChange=function(a){sisiliano.linearSlider.onSliderPointerLabelStyleChange(a);var b=a.model.styles.sliderBar.backgroundBar.height/2+a.model.styles.sliderBar.padding.top;a.applier.change("styles.pointer.valuePointer.y",b-a.model.styles.pointer.valuePointer.height/2),a.applier.change("styles.pointer.valuePointerShadow.y",b-a.model.styles.pointer.valuePointerShadow.height/2)},sisiliano.linearSlider.onResize=function(a){var b=a.model.styles.sliderBar.padding,c=a.model.styles,d=b.top+b.bottom+Math.max(c.sliderBar.backgroundBar.height,c.sliderBar.valueBar.height);a.applier.change("styles.controller",{width:null,height:d})},sisiliano.linearSlider.onStatusChange=function(a,b){a.locate("valuePointerHover").css("display",b?"block":"none")},sisiliano.linearSlider.onValueChange=function(a,b){var c=a.model.size,d=parseInt(a.locate("backgroundRect").attr("width"),null),e=parseInt(a.locate("backgroundRect").attr("x"),null),f=d*(b/c);a.applier.change("styles.sliderBar.valueBar.width",f),a.applier.change("styles.pointer.valuePointer.x",f+e-a.model.styles.pointer.valuePointer.width/2),a.applier.change("styles.pointer.valuePointerShadow.x",f+e-a.model.styles.pointer.valuePointerShadow.width/2),a.applier.change("styles.pointer.labelText.x",f+e),sisiliano.linearSlider.onSliderPointerLabelStyleChange(a)},sisiliano.linearSlider.onColorChange=function(a,b){a.applier.change("styles.sliderBar.valueBar.fill",a.model.styles.sliderBar.valueBar.fill||b[0]),a.applier.change("styles.sliderBar.backgroundBar.fill",a.model.styles.sliderBar.backgroundBar.fill||b[0]),a.applier.change("styles.pointer.label.fill",a.model.styles.pointer.label.fill||b[0]),a.applier.change("styles.pointer.labelText.fill",a.model.styles.pointer.labelText.fill||b[1]),a.applier.change("styles.pointer.valuePointer.fill",a.model.styles.pointer.valuePointer.fill||b[0]),a.applier.change("styles.pointer.valuePointerShadow.fill",a.model.styles.pointer.valuePointerShadow.fill||b[0]),a.applier.change("styles.ruler.value.fill",a.model.styles.ruler.value.fill||b[0]),a.applier.change("styles.ruler.line.fill",a.model.styles.ruler.line.fill||b[0])},sisiliano.linearSlider.setValueByPosition=function(a,b){var c=parseInt(a.locate("backgroundRect").attr("width"),null),d=parseInt(a.locate("valueRect").attr("x"),null)+a.model.styles.controller.x,e=(b.x-d)/c*a.model.size;a.model.value!==e&&a.applier.change("value",e+a.model.min)},sisiliano.linearSlider.addListeners=function(a){var b=function(){var b=d3.mouse(a.container.find("svg").eq(0).get(0)),c={x:b[0],y:b[1]};a.model.status.isActive&&(sisiliano.linearSlider.setValueByPosition(a,c),d3.event.preventDefault())},c=function(b){var c=a.locate("svg");if(c&&c.length>0){var d=c.offset(),e=c.width(),f={x:(b.pageX-d.left)/e*a.model.viewBox.width,y:0};a.model.status.isActive&&(sisiliano.linearSlider.setValueByPosition(a,f),b.preventDefault(b))}};document.addEventListener("mousemove",c),document.addEventListener("pointermove",c),document.addEventListener("touchmove",c),d3.select(a.container.get(0)).on("mousemove",b).on("pointermove",b).on("touchmove",b)},sisiliano.linearSlider.getNotches=function(a){return a.model.rulerPoints.filter(function(b){return b>=a.model.min&&b<=a.model.max})},sisiliano.linearSlider.drawNotches=function(b){var c=sisiliano.linearSlider.getNotches(b);b.locate("ruler").empty();var d=d3.select(b.locate("ruler").get(0)),e=parseInt(b.locate("backgroundRect").attr("width"),null),f=parseInt(b.locate("backgroundRect").attr("x"),null),g=parseInt(b.locate("backgroundRect").attr("y"),null);a.each(c,function(a){var c=f+e*(a-b.model.min)/(b.model.max-b.model.min);d.append("rect").attr("class","sisiliano-linear-slider-ruler-line").attr("x",c).attr("y",g),d.append("text").attr("class","sisiliano-linear-slider-ruler-value").attr("text-anchor","end").attr("x",c-5).attr("y",g+b.model.styles.ruler.line.height).text(a)}),sisiliano.util.applyStylesToTheElement(b.locate("rulerLines"),b.model.styles.ruler.line,b.options.styleRules),sisiliano.util.applyStylesToTheElement(b.locate("rulerValues"),b.model.styles.ruler.value,b.options.styleRules)}}(fluid),function(a){"use strict";a.defaults("sisiliano.piano",{gradeNames:["sisiliano.border","sisiliano.component"],template:"src/controllers/piano/piano.html",ariaDescription:"Piano keys are accessible by mouse and the keyboad as well. Only the active area of the piano is accessible by the keyboard. If you want to move the active area, use left and right keys.",model:{color:"#4CAF50",
styles:{keyBoard:{padding:{top:20,bottom:20,left:20,right:20},whiteKey:{width:40,height:150},blackKey:{width:27,height:100}}},keyBoard:{keys:[],length:36,start:0,activeArea:{start:0,end:10}}},events:{onKeyPress:null,onKeyRelease:null},selectors:{root:".sisiliano",svg:".sisiliano-piano",keyBoard:".sisiliano-piano-key-board",whiteKeys:".sisiliano-piano-white-key",blackKeys:".sisiliano-piano-black-key",keys:".sisiliano-piano-key",activeAreaStatus:".sisiliano-piano-active-area-status",pressedKeys:".sisiliano-piano-key-pressed"},listeners:{onReady:[{func:"sisiliano.piano.generateKeyboard",args:["{that}"]},{func:"sisiliano.piano.onCreate",args:["{that}","{that}.dom.keyBoard"]}]},modelListeners:{"keyBoard.activeArea.*":{func:"sisiliano.piano.onChangeActiveArea",args:["{that}","{that}.model.keyBoard.keys","{that}.model.keyBoard.activeArea"]},"keyBoard.keys":{func:"sisiliano.piano.onKeysChange",args:["{that}","{that}.model.keyBoard.keys"]}}}),sisiliano.piano.onChangeActiveArea=function(a,b,c){var d=[81,65,87,83,69,68,82,70,84,71,89,72,85,74,73,75,79,76,80,186,219,222,221],e=sisiliano.piano.getWhiteKeys(b);if(e.length>0){var f=e[c.start],g=e[Math.min(c.end,a.model.keyBoard.length-1)],h=f.index,i=g.index,j="The piano is active from "+sisiliano.piano.getMusicNote(f)+" to "+sisiliano.piano.getMusicNote(g);if(a.locate("activeAreaStatus").text(j),h>0){var k=b[h-1];"BLACK"===k.color&&h--}if(i<b.length-1){var l=b[i+1];"BLACK"===l.color&&i++}for(var m=0,n=0;n<b.length;n++){var o=b[n];o.isActive=n>=h&&i>=n,o.isActive&&0===m&&"WHITE"===o.color&&m++,m>1&&"WHITE"===o.color&&"WHITE"===b[n-1].color&&m++,o.isActive?(o.keyCode=d[m],m++):o.keyCode=null}}sisiliano.piano.onKeysChange(a,b),sisiliano.piano.clearPressedNodes(a)},sisiliano.piano.onKeysChange=function(a,b){d3.select(a.container.get(0)).selectAll(".sisiliano-piano-key").each(function(){var c=sisiliano.piano.getElementKey(d3.select(this),b);sisiliano.piano.updateKey(a,c,d3.select(this))})},sisiliano.piano.getElementKey=function(a,b){return b[a.attr("index")]},sisiliano.piano.onCreate=function(b){var c=d3.select(b.locate("keyBoard").get(0));c.empty(),c.append("text").attr("x",0).attr("y",0).attr("aria-live","assertive").attr("class","sisiliano-piano-active-area-status").text("Piano is active from G to C"),a.each(sisiliano.piano.getWhiteKeys(b.model.keyBoard.keys),function(a){var d=c.append("rect").attr("index",a.index).attr("class","sisiliano-piano-key sisiliano-piano-white-key").attr("height",a.height).attr("width",a.width).attr("x",a.x).attr("y",a.y);sisiliano.util.applyStyles(d,b.model.styles.keyBoard.whiteKey,["x","y","width","height"])}),a.each(sisiliano.piano.getBlackKeys(b.model.keyBoard.keys),function(a){var d=c.append("rect").attr("index",a.index).attr("class","sisiliano-piano-key sisiliano-piano-black-key").attr("height",a.height).attr("width",a.width).attr("x",a.x).attr("y",a.y);sisiliano.util.applyStyles(d,b.model.styles.keyBoard.blackKey,["x","y","width","height"])}),sisiliano.piano.onChangeActiveArea(b,b.model.keyBoard.keys,b.model.keyBoard.activeArea),sisiliano.piano.appendListeners(b)},sisiliano.piano.moveTabBy=function(a,b){if(b){var c={start:a.model.keyBoard.activeArea.start+b,end:a.model.keyBoard.activeArea.end+b},d=sisiliano.piano.getWhiteKeys(a.model.keyBoard.keys),e=c.start>=0&&c.start<d.length&&c.end>=0&&c.end<d.length&&c.start<c.end;e&&a.applier.change("keyBoard.activeArea",c)}},sisiliano.piano.clearPressedNodes=function(a){for(var b=0;b<a.model.keyBoard.keys.length;b++){var c=a.model.keyBoard.keys[b];c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c)}},sisiliano.piano.appendListeners=function(a){var b=!1,c=function(){b=!0;var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];b&&!d.isPressed&&(d.isPressed=!0,sisiliano.piano.updateKey(a,d),sisiliano.piano.playKey(a,d)),d3.event.preventDefault()},d=function(){var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];b&&!d.isPressed&&(d.isPressed=!0,sisiliano.piano.updateKey(a,d),sisiliano.piano.playKey(a,d)),d3.event.preventDefault()},e=function(){b=!1;var c=d3.select(this).attr("index"),d=a.model.keyBoard.keys[c];d.isPressed=!1,sisiliano.piano.updateKey(a,d),sisiliano.piano.releaseKey(a,d)},f=function(){var b=d3.select(this).attr("index"),c=a.model.keyBoard.keys[b];c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c),d3.event.preventDefault()};d3.select(a.container.get(0)).selectAll(".sisiliano-piano-key").on("mousedown",c).on("pointerdown",c).on("touchstart",c).on("mouseover",d).on("pointerover",d).on("touchmove",d).on("mouseup",e).on("pointerup",e).on("touchend",e).on("mouseleave",f).on("pointerleave",f).on("touchcancel",f),d3.select(a.container.get(0)).on("keydown",function(){var b=d3.event.keyCode,c=sisiliano.piano.getKeyByComputerKeyCode(b,a.model.keyBoard.keys);switch(c&&(c.isPressed||(c.isPressed=!0,sisiliano.piano.updateKey(a,c),sisiliano.piano.playKey(a,c)),d3.event.preventDefault()),b){case 37:sisiliano.piano.moveTabBy(a,-1),d3.event.preventDefault();break;case 39:sisiliano.piano.moveTabBy(a,1),d3.event.preventDefault()}}),d3.select(a.container.get(0)).on("keyup",function(){var b=d3.event.keyCode,c=sisiliano.piano.getKeyByComputerKeyCode(b,a.model.keyBoard.keys);c&&(c.isPressed=!1,sisiliano.piano.updateKey(a,c),sisiliano.piano.releaseKey(a,c),d3.event.preventDefault())});var g=function(){b=!1,d3.select(a.container.get(0)).selectAll(".sisiliano-piano-key-pressed").each(e)};document.addEventListener("mouseup",g),document.addEventListener("pointerup",g),document.addEventListener("touchend",g)},sisiliano.piano.playKey=function(a,b){a.events.onKeyPress.fire(b.index,sisiliano.piano.getFreequency(b.octave,b.octaveIndex))},sisiliano.piano.releaseKey=function(a,b){a.events.onKeyRelease.fire(b.index)},sisiliano.piano.updateKey=function(a,b,c){c||(c=a.container.find(".sisiliano-piano-key[index='"+b.index+"']"));var d=b.className;d+=b.isActive?" sisiliano-piano-key-active":" sisiliano-piano-key-inactive",d+=b.isPressed?" sisiliano-piano-key-pressed":"",c.attr("class",d)},sisiliano.piano.getKeyByComputerKeyCode=function(a,b){var c=b.filter(function(b){return b.keyCode===a});return 0===c.length?null:c[0]},sisiliano.piano.getKeysByColor=function(a,b){return a.filter(function(a){return a.color===b})},sisiliano.piano.getFreequency=function(a,b){var c=[261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883];return Math.pow(2,a)*c[b]},sisiliano.piano.OCTAVE={0:{color:"WHITE",note:"c"},1:{color:"BLACK",note:"c#"},2:{color:"WHITE",note:"d"},3:{color:"BLACK",note:"d#"},4:{color:"WHITE",note:"e"},5:{color:"WHITE",note:"f"},6:{color:"BLACK",note:"f#"},7:{color:"WHITE",note:"g"},8:{color:"BLACK",note:"g#"},9:{color:"WHITE",note:"a"},10:{color:"BLACK",note:"a#"},11:{color:"WHITE",note:"b"}},sisiliano.piano.getPianoKey=function(a){return sisiliano.piano.OCTAVE[a.octaveIndex]},sisiliano.piano.getMusicNote=function(a){var b=sisiliano.piano.getPianoKey(a);return b.note+" in octave "+(a.octave+1)},sisiliano.piano.getWhiteKeys=function(a){return sisiliano.piano.getKeysByColor(a,"WHITE")},sisiliano.piano.getBlackKeys=function(a){return sisiliano.piano.getKeysByColor(a,"BLACK")},sisiliano.piano.generateKeyboard=function(a){a.model.styles.keyBoard.blackKey.width=(a.model.styles.keyBoard.whiteKey.width-1)/3*2+1,a.model.styles.keyBoard.blackKey.height=a.model.styles.keyBoard.whiteKey.height/3*2,a.model.keyBoard.keys=[];for(var b={whiteKeys:0,blackKeys:0},c=0,d=a.model.keyBoard.start;d<a.model.keyBoard.length+a.model.keyBoard.start;d++,c++){var e,f=d%12;"WHITE"===sisiliano.piano.OCTAVE[f].color?(e={color:"WHITE",x:a.model.styles.keyBoard.padding.left+b.whiteKeys*a.model.styles.keyBoard.whiteKey.width,y:a.model.styles.keyBoard.padding.top,width:a.model.styles.keyBoard.whiteKey.width-1,height:a.model.styles.keyBoard.whiteKey.height,index:c,octave:Math.floor(d/12),octaveIndex:f,className:"sisiliano-piano-key sisiliano-piano-white-key"},b.whiteKeys++):"BLACK"===sisiliano.piano.OCTAVE[f].color&&(e={color:"BLACK",x:a.model.styles.keyBoard.padding.left+(b.whiteKeys-1)*a.model.styles.keyBoard.whiteKey.width+a.model.styles.keyBoard.whiteKey.width/3*2,y:a.model.styles.keyBoard.padding.top,width:a.model.styles.keyBoard.blackKey.width,height:a.model.styles.keyBoard.blackKey.height,index:c,octave:Math.floor(d/12),octaveIndex:f,className:"sisiliano-piano-key sisiliano-piano-black-key"},b.blackKeys++),a.model.keyBoard.keys.push(e)}a.applier.change("styles.controller",{width:b.whiteKeys*a.model.styles.keyBoard.whiteKey.width+a.model.styles.keyBoard.padding.left+a.model.styles.keyBoard.padding.right,height:a.model.styles.keyBoard.whiteKey.height+a.model.styles.keyBoard.padding.top+a.model.styles.keyBoard.padding.bottom}),a.applier.change("",a.model)}}(fluid),function(a){"use strict";a.defaults("sisiliano.slider",{gradeNames:["sisiliano.component"],model:{min:0,max:100,value:null,size:100,tickValue:1,status:{isActive:!1},formatValue:function(a){return Math.round(100*a)/100},title:"Abstract Slider Controller"},ariaDescription:"",selectors:{svg:"svg",valueLabel:".sisiliano-slider-value-text"},events:{onValueChange:null,onStatusChange:null},listeners:{onCreate:[{func:"sisiliano.slider.validateInputs",args:["{that}"]},{func:"sisiliano.slider.onInit",args:["{that}"]}],onReady:[{func:"sisiliano.slider.onMinValueChange",args:["{that}","{that}.model.min"]},{func:"sisiliano.slider.onMaxValueChange",args:["{that}","{that}.model.max"]}]},modelListeners:{value:{func:"sisiliano.slider.onValueChange",args:["{that}","{that}.model.value"]},formatValue:{func:"sisiliano.slider.onValueChange",args:["{that}","{that}.model.value"]},min:{func:"sisiliano.slider.onMinValueChange",args:["{that}","{that}.model.min"]},max:{func:"sisiliano.slider.onMaxValueChange",args:["{that}","{that}.model.max"]},"status.isActive":{func:"sisiliano.slider.onStatusChange",args:["{that}","{that}.model.status.isActive"]}}}),sisiliano.slider.onStatusChange=function(a){a.events.onStatusChange.fire()},sisiliano.slider.onInit=function(a){a.container.attr("tabindex",0),a.container.addClass("sisiliano"),a.container.attr("role","slider"),sisiliano.slider.addListeners(a)},sisiliano.slider.onMinValueChange=function(a,b){a.container.attr("aria-valuemin",b),a.applier.change("size",sisiliano.slider.getSize(a)),sisiliano.slider.onValueChange(a,a.model.value)},sisiliano.slider.onMaxValueChange=function(a,b){a.container.attr("aria-valuemax",b),a.applier.change("size",sisiliano.slider.getSize(a)),sisiliano.slider.onValueChange(a,a.model.value)},sisiliano.slider.onValueChange=function(a,b){"number"!=typeof b&&sisiliano.slider.updateTheValueInUI(a,a.model.min),b<a.model.min?(b=a.model.min,a.applier.change("value",b)):b>a.model.max?(b=a.model.max,a.applier.change("value",b)):sisiliano.slider.updateTheValueInUI(a,b)},sisiliano.slider.updateTheValueInUI=function(a,b){var c=b;a.model.formatValue&&"function"==typeof a.model.formatValue&&(c=a.model.formatValue(b)),a.container.attr("aria-valuenow",c),a.locate("valueLabel").text(c),a.events.onValueChange.fire(a,sisiliano.slider.getObviousValue(a,a.model.value))},sisiliano.slider.addListeners=function(a){var b=function(){var b=sisiliano.slider.getValue(a);38===d3.event.keyCode||39===d3.event.keyCode?(a.applier.change("value",b+a.model.tickValue),d3.event.preventDefault()):37!==d3.event.keyCode&&40!==d3.event.keyCode||(a.applier.change("value",b-a.model.tickValue),d3.event.preventDefault())};d3.select(a.container.get(0)).on("keydown",b).on("mousedown",sisiliano.slider.setSliderActiveStatus.bind(this,a,!0)).on("pointerdown",sisiliano.slider.setSliderActiveStatus.bind(this,a,!0)).on("touchstart",sisiliano.slider.setSliderActiveStatus.bind(this,a,!0)).on("mouseup",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)).on("pointerup",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)).on("touchend",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)),document.addEventListener("mouseup",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)),document.addEventListener("pointerup",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1)),document.addEventListener("touchend",sisiliano.slider.setSliderActiveStatus.bind(this,a,!1))},sisiliano.slider.setSliderActiveStatus=function(a,b){a.applier.change("status.isActive",b)},sisiliano.slider.getValue=function(a){return"number"==typeof a.model.value?a.model.value:a.model.min},sisiliano.slider.validateInputs=function(a){if(a.model.min>=a.model.max)throw new Error("Min should be less than max")},sisiliano.slider.getSize=function(a){return Math.abs(a.model.max-a.model.min)},sisiliano.slider.getValue=function(a){return"number"==typeof a.model.value?a.model.value:a.model.min},sisiliano.slider.getObviousValue=function(a,b){return b-a.model.min}}(fluid);