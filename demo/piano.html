<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <link href="./source/dist/sisiliano.min.css" rel="stylesheet"/>
    <script src="./source/lib/infusion/infusion-all.js"></script>
    <script src="./source/lib/handlebars/handlebars-1.0.rc.2.js"></script>
    <script src="./source/bower_components/d3/d3.js"></script>
    <script src="./source/dist/sisiliano.js"></script>
    <link href="./source/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="./source/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet"/>
    <script src="./source/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <style>
        .description {
            padding: 5px;
            /* background: rgba(0, 0, 0, 0.78); */
            color: #4CAF50;
            /* color: white; */
            font-style: italic;
            height: 100%;
            position: relative;
            display: inline;
        }

        .fn-btn {
            background-color: #4CAF50;
            color: white;
        }

        .preview {
            height: 100%;
        }

        body {
            padding: 20px;
            background: #4CAF50;
        }

        .demo {
            margin: 0px;
            height: 100%;
            position: relative;
            box-shadow: inset 1px 1px 5px 5px #4CAF50;
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            border-color: #4CAF50;
        }

        .preview {
            padding: 15px;
        }

        .introduction {
            padding: 40px;
            color: white;
        }

        .introduction-title {
            font-size: 60px;
        }
    </style>
    <script>
        $(document).on('ready', function () {
            var tds = $('.test');
            var colors = [
                "#F44336",
                "#E91E63",
                "#009688",
                "#4CAF50",
                "#CDDC39",
                "#673AB7",
                "#3F51B5",
                "#FFEB3B",
                "#FF9800"
            ];
            window.AudioContext = window.AudioContext || window.webkitAudioContext;
            var context = new window.AudioContext();
            var nodes = {};
            if (context) {
                var masterGain = context.createGain();
                masterGain.gain.value = 0.3;
                masterGain.connect(context.destination);
            }

            var playKey = function (index, frequency) {
                var oscillator = context.createOscillator();
                oscillator.type = "square";
                oscillator.frequency.value = frequency;
                oscillator.connect(masterGain);
                oscillator.start(0);
                nodes[index] = oscillator;
            };

            var releaseKey = function (index) {
                var node = nodes[index];
                if (node) {
                    node.stop(0);
                    node.disconnect();
                    nodes[index] = null;
                }
            };

            var tds = $('.test');
            var colors = ['#009688', 'blue', 'yellow', 'red', 'orange', 'blue'];
            for (var i = 0; i < tds.length; i++) {
                var elm = fluid.sisiliano.piano($(tds[i]), {
                    color: colors[i],
                    context: context
                });

                elm.events.onKeyPress.addListener(function (key, frequency) {
                    playKey(key, frequency);
                });
                elm.events.onKeyRelease.addListener(function (key) {
                    releaseKey(key);
                });
            }
        });
    </script>
</head>
<body>
<div class="row introduction">
    <h1 class="introduction-title">Sisiliano</h1>
    <p>
        With the introduction of the Web Audio API and music frameworks such as Flocking,
        it's possible to make music and develop custom instruments entirely using Web technologies.
        <br>
        A variety of user interface component libraries have been developed to assist in the creation
        of musical interfaces. However, the majority of them aren't very "web-like." Many are based
        on Canvas or bitmap images, and aren't compatible with responsive design techniques, can't be
        easily re-styled or customized using tools like CSS, and aren't accessible via the keyboard or
        with assistive technologies such as a screenreader.
        <br>
        This project will involve the creation of a small collection of high-quality, responsive,
        SVG or DOM-based musical user interface controls such as knobs, sliders, x/y pads, button matrices,
        envelope editors, waveform viewers
    </p>
</div>
<div class="row demo">
    <div class="col-sm-4 description">
        <h1>Piano</h1>
        This component was introduced for the purpose of testing the instruments created using flocking framework. So,
        the
        instrument created using the flocking shall be passed as parameter to the component. Also the primary color,
        starting
        note and the length of the piano also can be modified through parameters.
        <br>
        <br>
        This component is fully responsive and developed using an SVG. Also this is also accessible via the keyboard.
        So, the active area which can be controlled by the keyboard is highlighted in the piano. And the highlighted
        area
        can be moved to left and right using arrow keys.
      <pre>
        fluid.sisiliano.piano($('#elm'), {
          instrument: instrument,
          color: "#009688",
          keyBoard: {
            length: 50,
            start: 3,
          }
        });
      </pre>
        <br>
        <br>
        <button class="btn fn-btn">Read more</button>
        <button class="btn fn-btn">Try..</button>
    </div>
    <div class="col-sm-8 preview">
        <div class="col-xs-12 test" style="height: 100%"></div>
    </div>
</div>
</body>
</html>